V2.2.30-BP17 
=================================



版本信息 
-------------------------



|  类目  |       描述        |
|------|-----------------|
| 版本号  | V2.2.30-BP17    |
| 前置版本 | V2.2.20         |
| 发布时间 | 2021 年 5 月 19 日 |



适用版本 
-------------------------

支持从 V2.2.1-20200731153445 版本和 V2.2.20 版本直接升级到本版本。
**注意**



* 从 V2.2.1 版本升级到 V2.2.30 版本必须使用 V2.2.30-BP10 及以上版本。

  

* 如果从低版本升级到 V2.2.1 再升级到 V2.2.30，请确保升级到的 V2.2.1 版本是 V2.2.1-1865649 及之后的版本，并且升级到 V2.2.1 后合并或者转储一轮之后才能继续升级到 V2.2.30。

  




修复的问题 
--------------------------

* 修复了 select intersect 时触发 HASH INTERSECT DISTINCT 处理不正确导致返回结果错误的问题。

  

* 修复了 string 到 number 的隐式类型转换在转换全 0 的字符串导致 observer crash 的问题。

  

* 修复了 Oracle 模式下 insert (select from dual) union (select from dual) 导致的正确性问题。

  

* 修复了 drop global index 的场景下可能导致 observer crash 的问题。

  

* 修复了 medium text 改变为 long text 导致合并过程卡住的问题。

  

* 修复了在有 global index 的场景下进行 drop partition 导致租户 ID 500（内部租户）内存泄漏的问题。

  




已知问题 
-------------------------

* Oracle 模式下，不建议使用 nvarchar2 类型，使用该类型可能导致查询的 SQL 线程无响应。

  

* Oracle 模式下，sql_mode 如果设置为 PAD_CHAR_TO_FULL_LENGTH 可能导致查询正确性问题。

  

* Oracle 模式下查询系统视图带有别名会导致报错。

  




版本使用限制 
---------------------------

* 禁止将 clog 和数据放入同一个磁盘，尤其是机械磁盘。此情况下 CLOG 写盘有延迟可能导致 observer crash 问题。此外，clog 盘 IO 满可能导致系统核心表无 leader。

  

* 禁止 Oceanbase 数据库运行过程中将操作系统时间向过去回调。

  

* Oracle 模式不建议使用 nvarchar2。

  




日志传输服务 
===========================

OceanBase 数据库日志传输服务负责自动将主集群 REDO 日志传输到备集群。

它提供以下能力：

* 主集群向备集群传输 REDO 日志。

  

* 备集群落后情况下，自动从主集群拉取 REDO 日志。

  

* 管理所有备集群同步参数，支持级联传输日志。

  




OceanBase 数据库支持以下两种传输模式：

* 强同步模式`SYNC`

  该模式下，主集群的 REDO 日志要强同步到目标备集群。一条 REDO日志要等主集群和 `SYNC` 模式的备集群都持久化成功之后才认为持久化成功。事务的提交时延会增加主备集群的网络延时和备集群持久化日志的时间。

  最大保护和最大可用模式下，主集群仅支持配置一个 `SYNC` 模式的备集群。最大性能模式下，该传输模式不生效，用户可以配置任意数量的备集群为 `SYNC` 模式。

  主集群可以将自己配置为 `SYNC` 模式，只有当自己切换为备集群时才有意义。最大保护和最大可用模式下，执行 switchover 前，要求将主集群配置为 `SYNC` 模式，保证 switchover 之后，仍然存在一个 `SYNC` 模式的备集群。
  

* 异步同步模式 `ASYNC`

  该模式下，主集群的 REDO 日志会异步同步到目标备集群。事务的提交时延不受目标备集群影响。
  




日志传输模式描述了主集群日志是否要强同步给目标备集群，OceanBase 数据库支持一主多备，不同的备集群可以配置不同的日志传输模式。不同的保护模式下，日志传输模式也有不同的含义。下表列出了所有可能出现的场景，以及主集群是否会强同步日志给目标备集群。


|------------|-------------------------|---------------------------|
|            | **强同步模式备集群** **`SYNC`** | **异步同步模式备集群** **`ASYNC`** |
| **最大保护模式** | 强同步                     | 异步同步                      |
| **最大性能模式** | 异步同步                    | 异步同步                      |
| **最大可用模式** | 强同步 / 异步同步              | 异步同步                      |



* 最大保护模式下，`SYNC` 模式备集群是强同步的，`ASYNC` 模式备集群是异步同步的。

  

* 最大性能模式下，无论配置何种传输模式，都是异步同步的。

  

* 最大可用模式下，`SYNC` 模式备集群会在强同步和异步同步之间切换；`ASYNC` 模式备集群是异步同步的。

  




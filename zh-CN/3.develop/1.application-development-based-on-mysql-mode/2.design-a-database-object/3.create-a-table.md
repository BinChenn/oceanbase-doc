# 创建表

本节主要介绍了创建表相关的一些

## 表简介

数据库表是一系列二维数组的集合，用来代表和储存数据对象之间的关系。

从数据的分布上，OceanBase 数据库中的表可以分为非分区表和分区表：

* 分区表在创建时，至少要指定一级分区列和相关分区信息。

* 非分区表不需要指定分区信息。

更多表的介绍请参见 [表概述](7.reference\5.concepts-of-oceanbase-database-system-old\4.database-objects-1\2.mysql\2.table-1\1.table-overview-1.md)。

## 创建表前准备

在创建表前，您需要确认以下事项：

* 请确认您已连接到数据库的 MySQL 租户，连接数据库的操作请参见 [连接数据库](../../1.application-development-based-on-mysql-mode/1.database-connection/1.connection-mode-overview.md)。
  
  >**说明**
  >
  >当前登录租户所属的租户模式可以由 `sys` 租户通过查询 `oceanbase.DBA_OB_TENANTS` 视图进行确认。

* 请确认您已拥有 CREATE 权限，查看当前用户权限的相关操作请参见 [查看用户权限](7.reference\3.user-guide-old\6.basic-database-management\4.manage-tenants-1\5.manage-users-and-permissions\3.mysql-3\4.view-user-permissions-1.md)。如果不具备该权限，请联系管理员为您授权，用户授权的相关操作请参见 [修改用户权限](7.reference\3.user-guide-old\6.basic-database-management\4.manage-tenants-1\5.manage-users-and-permissions\3.mysql-3\5.modify-user-permissions-2.md)。

## 创建表

请使用 [CREATE TABLE](7.reference\4.development-guide-refactoring-1-old\6.sql-syntax\2.common-tenant-mysql-mode\6.sql-statement\16.create-table.md) 语句创建表，并参考以下内容完成表的创建。

### 明确表的分区方案

在创建表时，需要明确表的分区方案，如果表中的数据量很大时，建议对表进行分区。

OceanBase 数据库的 MySQL 模式支持的分区类型及详细介绍请参见 [分区](7.reference\3.user-guide-old\8.distributed-storage-management\2.manage-partition-table\2.mysql-1\1.partition-overview-6.md)。

### 定义表名

创建表时，需要先为表命名，以下是定义表名时需要遵循的要求：

* 在 OceanBase 数据库的 MySQL 模式中，每个表的名称必须保证在数据库内唯一。

* 为表命名时，应使用具有实际意义的表名，不要使用 `table1` 这样的表名。

### 定义列

​在数据库中，列（Column）用于记录一张表上某个属性的字段的值，用户给每个属性起的名称即为列名。除了列名以外，列上还有数据类型以及数据类型的最大长度（精度）等信息。

以下是定义表的列时需要遵循的要求：

* 根据数据类型的特点，为待存储在列中的数据选择合适的数据类型。

  OceanBase 数据库 MySQL 模式中支持的数据类型及详细介绍请参见 [数据类型概述](7.reference\5.concepts-of-oceanbase-database-system-old\4.database-objects-1\2.mysql\2.table-1\2.data-type-3\1.data-type-overview-2.md)。

* 对于字符串数据，建议使用变长字符串数据类型，并指定最大长度。请确保指定的最大长度大于需要存储的最大字符数，避免超出最大长度时出现字符截断现象。

* 根据 [主键列](#定义主键列) 的要求，确认是否需要为表定义主键列。

* 根据 [其他约束](#定义其他列约束) 的要求，确认是否需要向列中添加其他约束。

* 当列上有 `NOT NULL` 约束时，通常建议为该列设置默认值。当列类型为日期或时间类型时，可以设置默认值为数据库的当前时间。

### 定义主键列

主键值规则（Primary Key Value Rule）是定义在某一键 Key（键指一列或一个列集）上的规则，其作用是确保表内的每一数据行都可以由某一个键值唯一地确定。每个数据库表上最多只能定义一个 `PRIMARY KEY` 约束。构成此约束的列（一列或多列）的值可以作为一行数据的唯一标识符，即每个数据行可以由此主键值命名。

以下是定义主键列时需要遵循的要求：

* 建议为表定义一个主键，每个数据库表最多拥有一个主键列集合。

  在 OceanBase ​数据库中，不强制用户为表定义主键，但使用主键可以使表内的每行数据被唯一确定，且不存在重复的数据行。如果在创建时未定义主键列， OceanBase 数据库支持为已存在的表添加主键列。

* 主键列集合的值在全表范围内唯一。

* 主键列的数量不能超过 64 列，且主键数据总长度不能超过 16 KB。

* 主键列的值不能为 NULL 或空字符串，您必须为主键列输入值。

* 建议明确标识主键约束的名称。例如，主键约束命名为 “PK_xxx”。

更多主键约束相关的介绍，请参见 [主键约束](7.reference\5.concepts-of-oceanbase-database-system-old\4.database-objects-1\2.mysql\7.data-integrity-1\2.integrity-constraint-type-1\4.primary-key-constraint-1.md)。

定义主键约束的详细操作请参见 [定义列的约束类型](7.reference\3.user-guide-old\7.database-object-management-1\2.mysql-4\2.manage-tables-2\4.define-the-constraint-type-for-a-column-2.md)。

示例：

### 定义其他列约束

除了 PRIMARY KEY 约束外，OceanBase 数据库还支持 `NOT NULL` 约束、唯一性（UNIQUE）约束和外键（FOREIGN KEY）约束。使用约束可以简化表查询、提高查询性能并确保数据在语义上保持有效。

要约束单个列，请在该列的定义中添加一个约束关键字，如果要约束多个列，请在 [CREATE TABLE](7.reference\4.development-guide-refactoring-1-old\6.sql-syntax\2.common-tenant-mysql-mode\6.sql-statement\16.create-table.md) 语句中所有列的列表之后再添加整个约束的定义。

以下是定义其他列约束时需要遵循的要求：

* 建议给明确不存在 NULL 值的字段加上 `NOT NULL` 约束。

* 如果要引用另一个表中的值，请使用外键约束。

* 如果需要防止列中出现重复值，请使用唯一约束。

* 除 `NOT NULL` 约束外，建议明确标识其他约束的名称。例如，唯一约束命名为 “UNI_xxx”，外键约束命名为 “FK_xxx”。
  
定义其他列约束的详细操作请参见 [定义列的约束类型](7.reference\3.user-guide-old\7.database-object-management-1\2.mysql-4\2.manage-tables-2\4.define-the-constraint-type-for-a-column-2.md)。

### 定义表的自增列

在 OceanBase 数据库中，如果创建表时需要某个数值列的值不重复并且保持递增，可以将表中列的类型定义为 `AUTO_INCREMENT`，即自增列。

以下是定义自增列需要遵循的要求：

* `AUTO_INCREMENT` 是数据列的一种属性，仅适用于整数类型的数据列。

* `AUTO_INCREMENT` 所在的数据列必须具备 `NOT NULL` 属性。

更多自增列的介绍和详细操作请参见 [定义自增列](7.reference\3.user-guide-old\7.database-object-management-1\2.mysql-4\2.manage-tables-2\3.define-an-auto-increment-column-2.md)。

示例：


## 相关阅读


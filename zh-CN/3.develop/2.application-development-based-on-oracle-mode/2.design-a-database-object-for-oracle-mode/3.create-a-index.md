# 创建索引

表创建成功后，可以在表的一个或多个列上创建索引以加速表上 SQL 语句的执行速度。

## 索引简介

索引也叫二级索引，是一种可选的表结构。OceanBase 数据库采用的是聚集索引表模型，对于用户指定的主键，系统会自动生成主键索引，而对于用户创建的其他索引，则是二级索引。您可以根据自身业务需要来决定在哪些字段上创建索引，以便加快在这些字段上的查询速度。

索引可以分为唯一索引和非唯一索引：

* 唯一索引保证在表内的索引列上不存在两行有完全相同的值。在 OceanBase 数据库中，NULL 值也会存储在索引中。

* 非唯一索引可能存在完全相同的值。

关于唯一索引和非唯一索引的更多介绍，请参见 [唯一索引和非唯一索引](../../../7.reference/1.concepts-of-oceanbase-database-system/4.database-objects-1/1.oracle/3.index/3.unique-and-non-unique-indexes.md)。

对于分区表，索引还可以分为局部索引和全局索引：

* 局部索引是针对单个分区上的数据创建的索引，因此局部索引的索引键值跟表中的数据是一一对应的关系，即局部索引上的一个分区一定对应到一个表分区，它们具有相同的分区规则，因此对于局部唯一索引而言，它只能保证分区内部的唯一性，而无法保证表数据的全局唯一性。

* 全局索引的分区规则与表分区相互独立，因此索引表中一个分区的索引值可能对应着主表的多个分区内的数据。

关于局部索引和全局索引的更多介绍，请参见 [局部索引和全局索引](../../../7.reference/1.concepts-of-oceanbase-database-system/4.database-objects-1/1.oracle/3.index/2.local-and-global-indexes.md)。

## 索引创建准备

在创建索引前，您需要确认以下事项：

* 请确认您已连接到数据库的 Oracle 租户，连接数据库的操作请参见 [连接数据库](../1.database-connection-for-oracle-mode/1.connection-mode-overview.md)。

  >**说明**
  >
  >当前登录租户所属的租户模式可以由 `sys` 租户通过查询 `oceanbase.DBA_OB_TENANTS` 视图进行确认。

* 请确认您已拥有 INDEX 权限以及待添加索引的表的 ALTER 权限，查看当前用户权限的相关操作请参见 [查看用户权限](7.reference/2.manage-guide/2.basic-database-management/4.manage-tenants-1/5.manage-users-and-permissions/2.oracle-3/4.view-user-permissions.md)。如果不具备该权限，请联系管理员为您授权，用户授权的相关操作请参见 [修改用户权限](7.reference/2.manage-guide/2.basic-database-management/4.manage-tenants-1/5.manage-users-and-permissions/2.oracle-3/5.modify-user-permissions-1.md)。

* 请确认已创建表，创建表的操作请参见 [创建表](3.create-a-table.md)。

## 索引创建建议

* 对经常更新的表要避免对其进行过多的索引，对经常用于查询的字段应该创建索引。

* 数据量小的表最好不要使用索引，因为由于数据较少，可能查询全部数据花费的时间比遍历索引的时间还要短，索引就可能不会产生优化效果。

* 当修改性能远远大于检索性能时，不建议创建索引。

* 创建高效索引：

  * 索引要全部包含所需查询的列，包含的列越全越好，这样可以尽可能地减少回表的行数。

  * 等值条件永远放在最前面。

  * 过滤与排序数据量大的放前面。

## 创建唯一索引

如果需要索引列上不存在重复的值，可以创建唯一索引。

您可以使用 [CREATE UNIQUE INDEX](../../../7.reference/4.development-guide-refactoring/1.sql-syntax/3.common-tenant-oracle-mode/9.sql-statement-1/1.DDL-1/16.create-index-1.md) 语句，再参考以下的要求为已存在的表创建唯一索引。

也可以使用 [ALTER TABLE](../../../7.reference/6.sql-syntax/2.common-tenant-mysql-mode/6.sql-statement/6.alter-table.md) 语句在修改表时，参考以下要求为已存在的表添加唯一索引。该语句可以一次添加多个索引，索引关键字用 `INDEX` 或 `KEY` 都可以。

以下是创建唯一索引需要遵循的要求：

* 在 OceanBase 数据库中，索引名称必须在表范围内保证唯一。

* 唯一索引可以有多个，但其列值必须唯一。

* 索引列的值允许为 NULL 值。

## 创建非唯一索引

## 创建局部索引

## 创建全局索引

## 相关阅读

* [查看索引](7.reference/2.manage-guide/3.database-object-management-1/1.oracle-4/3.manage-indexes-1/3.view-indexes-1.md)

* [删除索引](7.reference/2.manage-guide/3.database-object-management-1/1.oracle-4/3.manage-indexes-1/4.delete-an-index-1.md)
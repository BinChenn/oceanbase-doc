# 表相关问题

本文主要介绍表相关问题的报错信息和处理方法。

## 表已存在

在创建表时未添加 `IF NOT EXISTS` 关键字，如果创建的表已存在，则系统会报错。

### 报错信息

例如，创建 `student` 表时显示对象名称已存在。

```sql
 obclient [SYS]> CREATE TABLE student(
          id NUMBER,
          name varchar(18),
          sex char(1),
          age NUMBER,
          address varchar(200),
           email varchar(100),
           c_date date,
           PRIMARY KEY (id)
           );

ORA-00955: name is already used by an existing object
```

该报错信息对应的错误码信息如下：

* 错误码：ORA-00955

* OceanBase 错误码：5331、5834

* SQLSTATE：HY000

关于错误码的详细说明及介绍，请参见 [错误码概述](../../../7.reference/5.system-reference/7.error-code-for-oracle/1.use-error-information.md)。

### 处理方法

1. 查看数据库中该表是否已存在，例如：

   ```sql
    obclient [SYS]> SELECT t.table_name tablename FROM user_tables t WHERE table_name = 'student';
   +------------+
   | TABLENAME  |
   +------------+
   | STUDENT    |
   +------------+
   1 row in set
   ```

2. 如果该表已存在，请优先确认已有表是否满足业务需求，如果不满足，建议为新表设计新的表名，例如，改为创建 `t_stu` 表。

   ```sql
    obclient [SYS]> CREATE TABLE t_stu(
          t_id NUMBER,
          t_name varchar(18),
          t_sex char(1),
          t_age NUMBER,
          t_address varchar(200),
          t_email varchar(100),
          t_c_date date,
          PRIMARY KEY (t_id)
           );
   Query OK, 0 rows affected
   ```

   >**说明**
   >
   >如果确认已存在的表不再使用，也可以用 `DROP TABLE` 将该表删除后重新创建。

## 表不存在

在进行表操作时，如果待操作的表不存在，系统会报错。

### 报错信息

例如，查询 `student` 表时，显示对象不存在。

```sql
 obclient [SYS]> desc dws_ny;
ORA-04043: object SYS.DWS_NY does not exist
```
该报错信息对应的错误码信息如下：

* ORA-04043

* OceanBase 错误码：5400

* SQLSTATE：HY000

关于错误码的详细说明及介绍，请参见 [错误码概述](../../../7.reference/5.system-reference/7.error-code-for-oracle/1.use-error-information.md)。

### 处理方法

1. 如果不存在，建议先检查表名称是否书写正确；如果确认无误，可以通过 `CREATE TABLE` 来创建需要的表。示例如下：

   ```sql
   obclient [SYS]> CREATE TABLE dws_ny(
   id NUMBER,
   name varchar(18),
   sex char(1),
   age NUMBER,
   address varchar(200),
   email varchar(100),
   c_date date,
   PRIMARY KEY (id)
   );
   ```

2. 创建成功后，查看创建的表的表结构。

   ```sql
    obclient [SYS]> desc dws_ny;
   +---------+---------------+------+-----+---------+-------+
   | FIELD   | TYPE          | NULL | KEY | DEFAULT | EXTRA |
   +---------+---------------+------+-----+---------+-------+
   | ID      | NUMBER(38)    | NO   | PRI | NULL    | NULL  |
   | NAME    | VARCHAR2(18)  | YES  | NULL | NULL    | NULL  |
   | SEX     | CHAR(1)       | YES  | NULL | NULL    | NULL  |
   | AGE     | NUMBER(38)    | YES  | NULL | NULL    | NULL  |
   | ADDRESS | VARCHAR2(200) | YES  | NULL | NULL    | NULL  |
   | EMAIL   | VARCHAR2(100) | YES  | NULL | NULL    | NULL  |
   | C_DATE  | DATE          | YES  | NULL | NULL    | NULL  |
   +---------+---------------+------+-----+---------+-------+
   7 rows in set
   ```

## 相关阅读

[创建表](../2.design-a-database-object-for-oracle-mode/2.create-a-table.md)
检查集群资源使用状态 
===============================
#docslug#/oceanbase-database/oceanbase-database/V4.0.0/check-cluster-resource-usage


通过 OCP 查看集群资源的使用情况 
---------------------------------------

>**说明**
>
>不同 OCP 版本的操作界面可能不同，本节以 OCP V3.1.1 版本为例提供操作指导，OCP 其他版本的操作请参考对应版本的《 OCP 用户指南》文档。

可通过 OCP 查看集群的资源负载情况。操作步骤如下：

1. 登录 OCP，进入 **集群概览** 主页面。

   

2. 在 **集群概览** 页面的 **集群列表** 区域，单击要查询的 **集群名** 。

   

3. 在显示的页面的左侧导航栏上，单击 **资源管理** 。![resource](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0139290461/p377891.png)

   配置功能项描述如下表所示：
   

   |               参数               |                                                                                                                            说明                                                                                                                            |
   |--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | 条件范围                           | 选择按 **数据库** 进行筛选，筛选条件可以为选择数据库、表或分区。确定筛选条件后，单击 **查询** ，即可在 **资源使用趋势** 和 **排行榜** 区域查看信息。   <br>选择按 **表组** 进行筛选，选则全部表组或某一表组，选择全部表或某一表，选择全部分区或某一分区。确定筛选条件后，单击 **查询** 。    |
   | 资源使用趋势                         | 查看 **磁盘、分区副本、CPU** 和 **内存** 的趋势图。                                                                                                                                                                                                                        |
   | 磁盘和分区副本                        | 展示资源使用情况的趋势。                                                                                                                                                                                                                                             |
   | CPU 和 内存                       | 展示资源分配情况的趋势。对于 CPU 的负载，建议最高阈值不超过 80%；对于内存的负载，建议最高阈值不超过 90%。                                                                                                                                                                                              |
   | 筛选图标或 Zone3 / Zone2 / Zone1 图标 | 单击每个趋势图的筛选图标或 Zone3 / Zone2 / Zone1 图标，可分别查看不同 Zone 的资源水位。                                                                                                                                                                                               |

   




通过 SQL 命令查看集群资源的使用情况 
-----------------------------------------

您可使用 sys 租户登录， 执行以下命令，查看集群资源的使用情况。

```sql
ob-sys 10.0.0.0 (root@oceanbase)>   SELECT * FROM GV$OB_SERVERS LIMIT 2;
+----------------+----------+-------+----------+--------------+--------------+------------------+--------------+------------------+--------------+--------------+-------------------+-------------------+-----------------+--------------------+------------------+-------------------------+-------------------------+
| SVR_IP         | SVR_PORT | ZONE  | SQL_PORT | CPU_RESERVED | CPU_CAPACITY | CPU_CAPACITY_MAX | CPU_ASSIGNED | CPU_ASSIGNED_MAX | MEM_CAPACITY | MEM_ASSIGNED | LOG_DISK_CAPACITY | LOG_DISK_ASSIGNED | LOG_DISK_IN_USE | DATA_DISK_CAPACITY | DATA_DISK_IN_USE | DATA_DISK_HEALTH_STATUS | DATA_DISK_ABNORMAL_TIME |
+----------------+----------+-------+----------+--------------+--------------+------------------+--------------+------------------+--------------+--------------+-------------------+-------------------+-----------------+--------------------+------------------+-------------------------+-------------------------+
| 172.30.xxx.xxx |     288x | zone1 |     2881 |            2 |           62 |               62 |          4.5 |              4.5 |  75161927680 |  30064771072 |      179583320064 |       55834574848 |     15703474176 |       107374182400 |       8380219392 | NORMAL                  | NULL                    |
+----------------+----------+-------+----------+--------------+--------------+------------------+--------------+------------------+--------------+--------------+-------------------+-------------------+-----------------+--------------------+------------------+-------------------------+-------------------------+
1 row in set (0.01 sec)
 ```
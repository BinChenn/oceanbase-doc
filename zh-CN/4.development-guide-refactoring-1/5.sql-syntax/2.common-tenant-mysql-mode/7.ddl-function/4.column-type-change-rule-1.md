# 列类型变更规则 
#docslug#/oceanbase-database/oceanbase-database/V4.0.0/column-type-change-rule-1
在 OceanBase 数据库 MySQL 模式下进行列类型变更时，需要首先考虑表级的列类型变更规则，特别是一些数据类型的禁用场景。其次是考虑列类型变更中源数据类型和目标数据类型的变更规则。

## 表级列类型变更规则 

### 禁用规则 

* 外键约束

  对于 Online DDL 和 Offline DDL，除以下特殊情况（需要注意，所涉及的类型修改只改变显示精度，而不改变存储结构）的其他场景都不支持修改外键列类型。
  * 参考列/被参考列的数据类型是 `FLOAT(m,n)`，支持更改精度大小，但不支持 `SIGNED` 和 `UNSIGNED` 的互相转换。

    
  
  * 参考列/被参考列是 `DOUBLE(m,n)`，支持更改精度大小，但不支持 `SIGNED` 和 `UNSIGNED` 的互相转换。

    
  
  * 参考列/被参考列是 `VARCHAR(m)`，支持改大精度，不支持改小精度，并且不支持改成 `CHAR` 类型。

    
  

  

* `CHECK` 约束

  对于 Online DDL 和 Offline DDL， MySQL 模式下带有 `CHECK` 约束的列不支持修改列类型。
  

* Trigger 约束

  仅针对 Offline DDL，当列上有非 `DISABLE` 的 Trigger 约束时，禁止修改列类型；如果全部是 `DISABLE` 的 Trigger，则不影响 DDL，并且新表里需要包含此 `DISABLE` 的 Trigger。
  




### 变更规则 

* 在相同数据类型长度变长的情况下，虽然用户预期数据发生变化，例如将某一列的数据类型 `CHAR` 更改为 `CHAR(11)`，由于 OceanBase 数据库存储 `CHAR` 的方式可以是 Online 操作，也不需要重写数据。如果该列上只有索引表，那么可以通过 Online 的方式修改索引列的长度，但如果该列修改了主键或者分区键，则还是应该执行 Offline 操作，即" **同类型变长有主键，分区键要 Offline** "。

  对于 `VARCHAR` 类型的长度变长，如果用户预期数据不发生任何变化，可以通过 Online 的方式变更，但是需要同时修改索引表等相关依赖对象的 Schema。需要注意的是，这种情况下即使变更了主键或者分区键，也可以是 Online 方式的，即" **用户预期数据不发生变化，但依赖对象中的 Schema 也要跟着改掉** "。
  

* 在 OceanBase 数据库中，可能有相同大数据类型（即数值数据类型、字符数据类型、时间数据类型）的变更，如果该列没有被索引表、外键、主键、分区键等引用的情况，可以通过 Online 的方式变更；如果被依赖对象引用，则需要通过 Offline 的方式，即" **大类型变更有依赖对象要 Offline"。**

  

* 对于数值数据类型，如果出现 `SIGNED` 和 `UNSIGNED` 的转换，在允许类型变更的情况下，需要执行 Offline 操作；对于字符数据类型，如果出现字符集和字符序 Collation 变更，在允许列类型变更的情况下，需要执行 Offline 操作。

  

* 当某一列被生成列引用时，允许列类型的变更操作。

  




## 列级变更规则 

在 OceanBase 数据库中，所有列数类型分为三个大类，分别是数值数据类型、字符数据类型和时间数据类型。这三个大类内的变更规则是类似的，每种大类之间的变更规则也是类似的，但是也有一些特殊情况，如果遇到特殊情况，则优先使用特殊规则。

如下各表分别列举每种大类内部的转换规则和大类之间的转换规则。对于特殊情况，将单独展示其转换规则。

### 数值数据类型大类内的变更规则 

数值数据类型分为：

* 整型：`TINYINT`、`SMALLINT`、`MEDIUMINT`、`INT`、`BIGINT`

  

* 浮点型：`FLOAT`、`DOUBLE`

  

* 定点型：`NUMBER`

  

* 二进制：`BIT`

  



如下表格为数值数据类型大类内的变更规则。


| 数据类型 |                                                                                                                              To TINYINT、SMALLINT、MEDIUMINT、INT、BIGINT                                                                                                                              |                                                                                                                                                                                                          To FLOAT、DOUBLE                                                                                                                                                                                                          |                                                                                                                                                         To NUMBER                                                                                                                                                         |                                                                                                                                                                                    To BIT                                                                                                                                                                                    |
|------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 整型   | 如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据。如果大类型变更有依赖对象，要执行 Offline DDL。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超整型的表示范围，则会报错。   <li> 非严格模式下，如果实际存储的数据超出整型的表示范围，则截断成整型的最大或最小值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超出浮点型的表示范围，则报错。   <li> 非严格模式下，如果实际存储的数据超出浮点型的表示范围，则截断成浮点型的最大或最小值。</ul>                                                                                                                                                                                                                                  | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果实际存储的数据超出定点型的表示范围时，则报错。   <li> 非严格模式下，如果实际存储的数据超出定点型的范围，则截断成定点型的最大值。</ul>                                                                                                              | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超出 `BIT(m)` 的表示范围时，则报错。   <li> 非严格模式下，如果实际存储的数据超出 `BIT(m)` 的表示范围时，则转换成 `BIT` 的最大值。</ul>                                                                                                                                                            |
| 浮点型  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>严格模式下，如果实际存储的数据超出整型的表示范围，则会报错。  <li>  非严格模式下，如果实际存储的数据超出整型的表示范围，则截断成整型的最大或最小值。                                                                                                     | 对于 `FLOAT(p)`： <ul><li>当精度 p\>=25 时，存储为 `DOUBLE` 类型。  <li> 当精度 p\<25 时，存储为 `FLOAT` 类型。</ul>    `FLOAT` 与 `DOUBLE` 互相转储时执行 Offline DDL，需要重写数据。转换规则如下：<ul><li>严格模式下，如果实际存储的数据超出浮点型的表示范围，则会报错。  <li> 非严格模式下，如果实际存储的数据超出浮点型的表示范围，则截断成浮点型的最大或最小值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超出定点型的表示范围时，则会报错。   <li> 非严格模式下，如果实际存储的数据超出定点型的范围，则截断成定点型的最大值。 </ul>                                                                                                            | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超出 `BIT(m)` 的表示范围时，则会报错。   <li> 非严格模式下，如果实际存储的数据超出 `BIT(m)` 的表示范围时，则转换成 `BIT` 的最大值。 </ul>                                                                                                                                                          |
| 定点型  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超出整型的表示范围，则报错。  <li> 非严格模式下，如果实际存储的数据超出整型的表示范围，则截断成整型的最大或最小值。 </ul>                                                                                                   | 执行 Offline DDL，需要重写数据。转换规则如下：  <ul><li> 严格模式下，如果实际存储的数据超出浮点型的表示范围，则报错。  <li> 非严格模式下，如果实际存储的数据超出浮点型的表示范围，则截断成浮点型的最大或最小值。  </ul>                                                                                                                                                                                                                | 如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据。用户预期数据不发生变化，但要同时更改依赖对象中的 Schema。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下：  <ul><li> 严格模式下，如果实际存储的数据超出定点型的表示范围，则会报错。   <li> 非严格模式下，如果实际存储的数据超出定点型的表示范围，则截断成定点型的最大或最小值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下：  <ul><li>严格模式下，如果实际存储的数据超出 `BIT(m)` 的表示范围时，则会报错。   <li> 非严格模式下，如果实际存储的数据超出 `BIT(m)` 的表示范围时，则转换成 `BIT` 的最大值。</ul>                                                                                                                                                           |
| 二进制  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果 `BIT` 转成十进制的值超出整型的表示范围，则会报错。   <li> 非严格模式下，如果 `BIT` 转成十进制的值超出整型的表示范围，则截断成整型的最大或最小值。</ul>                                                                                     | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果 `BIT` 转成十进制的值超出浮点型的表示范围，则会报错。   <li> 非严格模式下，如果 `BIT` 转成十进制的值超出浮点型的表示范围，则截断成浮点型的最大或最小值。</ul>                                                                                                                                                                                                   | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果 `BIT` 转成十进制的值超出定点型的表示范围，则会报错。  <li> 非严格模式下，如果 `BIT` 转成十进制的值超出定点型的表示范围，则截断成定点型的最大或最小值。  </ul>                                                                                       | 如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据。用户预期数据不发生变化，但要同时更改依赖对象中的 Schema。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果实际存储的数据超出目标类型的表示范围，则会报错。   <li> 非严格模式下，如果实际存储的数据超出目标类型的表示范围，则截断成目标类型的最大或最小值。    严格和非严格模式下 OceanBase 数据库支持 `ALTER TO BIT(0);`，实际结果和 `BIT(1)` 一致。</ul> |



### 字符数据类型大类内变更规则 

字符数据类型分为：

* `CHAR`、`VARCHAR`

  

* `BINARY`、`VARBINARY`

  

* `TEXT` 大类型：`TINYTEXT`、`MEDIUMTEXT`、`TEXT`、`LONGTEXT`

  

* `BLOB` 大类型：`TINYBLOB`、`MEDIUMBLOB`、`BLOB`、`LONGBLOB`

  

* `ENUM`、`SET`

  




如下表格为字符数据类型大类内的变更规则。


|                  数据类型                  |                                                                                                                                                          To CHAR                                                                                                                                                          |                                                                                                                         To BINARY                                                                                                                          |                                                                                                                                                                   To VARCHAR\\ VARBINARY                                                                                                                                                                   |                                                                                                                                                                                       To TEXT\\ BLOB                                                                                                                                                                                       |                                                                                                                                                                                  To ENUM\\ SET                                                                                                                                                                                   |
|----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `CHAR`                                 | 如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据，并遵从" **同类型变长有主键、分区键要Offline** "。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果发生尾部非空格字符被截断了，则会报错。   <li> 非严格模式下，如果目标类型的长度无法容纳源字符串长度，则截断。</ul>                     | 涉及到字符集的变更，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                               | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                                                                                          | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                                                                                                                         | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。 </ul>                                                                                                                                                                                   |
| `BINARY`                               | 涉及到字符集的变更，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                             | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。  <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                         | 涉及到字符集的变更，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。    在严格模式下，如果 `BINARY` 转 `VARCHAR`\\`VARBINARY` 后再转 `CHAR`，会报错"Data checksum error"。</ul>                                                                          | 涉及到字符集的变更，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   * 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                                                                                                              | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于`ENUM` 定义的值时，则转成空字符串。</ul>                                                                                                                                                                                     |
| `VARCHAR`、 `VARBINARY` | `VARCHAR` 转`CHAR` 时， 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果发生尾部非空格字符被截断了，则会报错。   <li> 非严格模式下，如果目标类型的长度无法容纳字符串长度，则会被截断。</ul>                                                                                                  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。  <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>    严格模式下，`VARCHAR` 转 `BINARY`，会报错"Data checksum error"。 | `VARCHAR` 转`VARCHAR` 或`VARBINARY` 转`VARBINARY` 时，如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据。用户预期数据不发生变化，但要同时更改依赖对象中的 Schema。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下：  <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>    | `VARCHAR` 转 `TEXT` 大类型： 如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据，并遵从" **大类型变更有依赖对象要Offline** "。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。  </ul>                                                                                                                                                                                  |
| `VARCHAR`、 `VARBINARY` | `VARBINARY` 转 `CHAR` 时涉及到字符集的变更，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                       | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>    严格模式下，`VARCHAR` 转 `BINARY`，会报错"Data checksum error"。 | `VARCHAR` 转 `VARBINARY`或`VARBINARY` 转 `VARCHAR` 时，执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                                       | `VARCHAR` 转 `BLOB` 大类型，执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                                                                                                   | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。  <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。</ul>                                                                                                                                                                                     |
| `TEXT `大类型、 `BLOB` 大类型 | `TEXT` 大类型转 `CHAR`，如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据，并遵从" **大类型变更有依赖对象要Offline** "。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>    | `TEXT` 大类型/`BLOB` 大类型转 `BINARY`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                        | `TEXT` 大类型转 `VARCHAR` 或 `BLOB` 大类型转 `VARBINARY`，如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据，并遵从" **大类型变更有依赖对象要Offline** "。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下：  <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。                        | `TEXT` 大类型转 `TEXT` 大类型或 `BLOB` 大类型转 `BLOB` 大类型，如果源数据类型长度小于等于目的数据类型长度，则执行 Online DDL，不需要重写数据。如果是 `TEXT` 大类型变更有依赖对象要Offline。如果是 `TEXT` 的相同类型变更，用户预期数据不发生变化，但依赖对象中的 Schema 也要一起更改。 如果源数据类型长度大于目的数据类型长度，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下：  <ul><li>  严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。</ul>                                                                                                                                                                                    |
| `TEXT `大类型、 `BLOB` 大类型 | `BLOB` 大类型转 `CHAR` 时，涉及字符集变更，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                          | `TEXT` 大类型/`BLOB` 大类型转 `BINARY`，则执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                        | `TEXT` 大类型转 `VARBINARY` 或 `BLOB` 大类型转 `VARCHAR`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。 </ul>                                                                                                                       | `TEXT` 大类型转 `BLOB` 大类型或 `BLOB` 大类型转  `TEXT` 大类型，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳源字符串，则会报错。   <li>非严格模式下，如果目标类型长度无法容纳源字符串，则会被截断。</ul>                                                                                                                                                        | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。</ul>                                                                                                                                                                                    |
| `ENUM`、 `SET`          | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                                                                                      | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                       | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                                                                                                                                       | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   * 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                                                                                                                                                                       | `ENUM` 和 `ENUM`、`SET` 和 `SET` 同类型转换，如果源 `ENUM` 是目标的 `ENUM` 的前缀，或者源 `SET` 是目标 `SET` 类型的前缀，则执行 Online DDL，不需要重写数据，用户预期数据不发生变化，但依赖对象中的 Schema 也要一起更改。 如果不满足以上前缀条件，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。</ul>    |
| `ENUM`、 `SET`          | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   <li>非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。 </ul>                                                                                     | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。  <li> 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                        | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                                                                                                                                        | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会报错。   <li> 非严格模式下，如果目标类型长度无法容纳 `ENUM`、`SET` 表示的源字符串，则会被截断。</ul>                                                                                                                                                                        | `ENUM` 和 `SET` 互相转换，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 定义的值时，则会报错。   <li> 非严格模式下，转换数据不属于 `ENUM` 定义的值时，则转成空字符串。</ul>                                                                                                                                                                |



### 时间类型大类内变更规则 

时间数据类型分为：

* `DATE`

  

* `TIMESTAMP`

  

* `DATETIME`

  

* `TIME`

  

* `YEAR`

  




|    数据类型     |                                                                                                To DATE                                                                                                |                                                                                                                                                                         To TIMESTAMP                                                                                                                                                                          |                                                                                          DATETIME                                                                                           |                                                                                                                                                   TIME                                                                                                                                                    |                                                                                                                               YEAR                                                                                                                                |
|-------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `DATE`      | 无限制                                                                                                                                                                                                   | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，转换的数据不满足`TIMESTAMP `的取值范围会执行失败。   <li> 非严格模式下，如果转换的数据不满足 `DATE` 的取值范围，则会转成`TIMESTAMP ` 的 0 值。</ul>                                                                                                                           | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，都是转成`DATETIME` 的日期部分，时间部分会补 0值。                                                                                                                           | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，非 `NULL` 的`DATE` 会转成`TIME` 的 0 值，`NULL` 还是转成 `NULL`。                                                                                                                                                                                                                    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 0 或者 `NULL` 值，其他情况都会报错，并且根据 `DATE` 位数进行截断，如果超出 `YEAR` 范围则会报错。   <li> 非严格模式下，根据 `DATE` 位数进行截断，如果超出 `YEAR` 范围则转换成 0 值。</ul>     |
| `TIMESTAMP` | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，去掉`TIMESTAMP` 的时分秒数据后，转换成`DATE` 应该能成功。   <li> 非严格模式下，也能成功转换。</ul>    | 如果源数据类型精度小于目的数据类型精度，则执行 Online DDL，不需要重写数据。用户预期数据不发生变化，但要同时更改依赖对象中的 Schema。 如果源数据类型精度大于目的数据类型精度，则执行 Offline DDL，需要重写数据。 严格模式和非严格模式下，`TIMESTAMP` 变长的方式为在后面补 0，缩短方式为截断后面的时间部分。                                                                                                                                                                                  | 执行 Offline DDL，需要重写数据。 严格模式和非严格模式下，`TIMESTAMP` 变长的方式为在后面补 0，缩短方式为截断后面时间部分。                                                                                                                  | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，取`TIMESTAMP` 的时分秒以及后面的数据，转换成`TIME`，并且根据 `TIME` 位数进行截断。                                                                                                                                                                                                                  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 0 或者`NULL` 值，其他都会报错，并且根据`DATE` 位数进行截断，如果数值超出 `YEAR` 范围会报错。   <li> 非严格模式下，根据`TIMESTAMP` 位数进行截断，如果超出 `YEAR` 范围则转换成 0 值。 </ul>   |
| `DATETIME`  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，去掉`DATETIME` 的时分秒数据后，转换成`DATE`，应该都能成功。   <li> 非严格模式下，也能成功转换。 </ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下， 如果`DATETIME` 的年份超过了 `TIMESTAMP`的表示范围，则会报错。 如果是后面的小数部分超过了 `TIMESTAMP`的表示长度， 则截断。   <li> 非严格模式下，如果`DATETIME` 的年份超过了 `TIMESTAMP`的表示范围，则转成 0。 如果是小数部分超过了`TIMESTAMP`的表示长度，则截断后面的小数部分。 </ul>    注意：`TIMESTAMP` 和`DATETIME` 范围是一致的。 | 如果源数据类型精度小于目的数据类型精度，则执行 Online DDL，不需要重写数据。用户预期数据不发生变化，但要同时更改依赖对象中的 Schema。 如果源数据类型精度大于目的数据类型精度，则执行 Offline DDL，需要重写数据。 严格模式和非严格模式下，`DATETIME` 小数部分时间变长的方式为在后面补 0，缩短方式为截断后面的时间部分。           | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，取`DATETIME` 的时分秒以及后面的数据，转换成`TIME`，并且根据 `TIME` 位数进行截断。                                                                                                                                                                                                                   | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 0 或者`NULL` 值，其他都会报错，并且根据`DATE` 位数进行截断，如果数值超出 `YEAR` 范围会报错。   <li> 非严格模式下，根据`DATETIME` 位数进行截断，如果超出 `YEAR` 范围则转换成 0 值。 </ul>     |
| `TIME`      | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，都是转换成当天的时间。                                                                                                                                                         | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，日期部分填充当天的时间，`TIME` 时间变长的方式为在后面补 0，缩短方式为截断后面的时间部分。                                                                                                                                                                                                                                                                           | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，日期部分填充当天的时间，`TIME` 小数部分时间变长的方式为在后面补 0，缩短方式为截断后面的时间部分。                                                                                                     | 执行 Offline DDL，需要重写数据。严格模式和非严格模式下，秒后面的小数位时间变长的方式为在后面补 0，缩短方式为截断后面的时间部分。                                                                                                                                                                                                                                   | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 0 或者`NULL` 值，其他都会报错。   <li> 非严格模式下，都转成`YEAR` 的 0 值，无需与MySQL 兼容。如果 `TIME` 转 `YEAR` 报错，则说明没有转换成 0 值。</ul>                       |
| `YEAR`      | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 0 或者`NULL` 值，其他都会报错。   <li> 非严格模式下，都转成`DATE` 的 0 值。</ul>          | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 `NULL` 值，其他都会报错。   <li> 非严格模式下，都转成`DATE` 的 0 值。 </ul>                                                                                                                                                                     | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，除了 `NULL` 值，其他都会报错。   <li> 非严格模式下，都转成`DATE` 的 0 值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，会把 `YEAR` 四位数字的中间加冒号，转成时分格式，如果时分超过`TIME` 的表示范围，例如19:99，则报错"Data truncation: Invalid data type for the operation"   <li> 非严格模式下，如果超过`TIME` 的表示范围，则转成`TIME` 的 0 值。</ul>    | `YEAR(m)` 中的 `m` 表示精度，修改 `m` 不影响数据。                                                                                                                                                                                                                               |



### 数值型大类和字符型大类转换规则 

数值型大类和字符型大类转换规则如下表所示。


|                             数据类型                              |                                                                                                               To 整型、浮点型、定点型                                                                                                               |                                                                                                                        To BIT 类型                                                                                                                         |                                                                               To CHAR、BINARY、 VARCHAR 、VARBINARY、 TEXT 大类、 BLOB 大类                                                                                |                                                                                               To ENUM、SET                                                                                                |
|---------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 整型、浮点型、定点型                                                    | 参见大类内的转换规则。                                                                                                                                                                                                                               | 参见大类内的转换规则。                                                                                                                                                                                                                                              | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，转换的数据超过字符类型的长度时，会报错。  <li> 非严格模式下，如果转换的数据超过 `CHAR` 类型的长度，则被截断。</ul>             | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，数据会被截断并转成 0 值。</ul>    |
| `BIT` 类型                                                      | 参见大类内的转换规则。                                                                                                                                                                                                                               | 参见大类内的转换规则。                                                                                                                                                                                                                                              | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果 `BIT` 类型对应的十进制数的数据超过字符类型的长度时，会报错。   <li> 非严格模式下，如果 `BIT` 类型对应的十进制数的数据超过字符类型的长度时，会被截断。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，数据会被截断并转成 0。</ul>      |
| `CHAR`、`BINARY` 、`VARCHAR` 、`VARBINARY` 、`TEXT` 大类、 `BLOB` 大类 | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果包含非法的数字，或者数字超过了整型的表示范围，则会报错。   <li> 非严格模式下，从高位往低位取数字，碰到非法数字后停止，如果这个数字没有超过整型的范围，则取该数字，如果超过整型表示范围，则取范围内的最大值或最小值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果包含非法的数字，或者数字超过了 `BIT` 的表示范围，则会报错。   <li> 非严格模式下，从高位往低位取数字，碰到非法数字后停止，这个数字如果没有超过 `BIT` 的范围，则取该数字，如果超过`BIT` 的表示范围，则取范围内的最大值或最小值。</ul>    | 参见大类内的转换规则。                                                                                                                                                                                                       | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，数据会被截断并转成 0 。</ul>      |
| `ENUM`、`SET`                                                  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果 `ENUM`（内部实际存储的`INT` 值）转成十进制的值超过整型的最大值，就会报错。    <li> 非严格模式下，如果超过整型的最大值，则截断成整型的最大值。</ul>                                 | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果 `ENUM`（内部实际存储的`INT` 值）转成十进制的值超过`BIT` 的最大值，就会报错。   <li> 非严格模式下，如果超过 `BIT` 的最大值，则截断成 `BIT` 的最大值。</ul>                                  | 参见大类内的转换规则。                                                                                                                                                                                                       | 参见大类内的转换规则。                                                                                                                                                                                              |



### 数值型大类和时间大类转换规则 

数值型大类和时间大类转换规则如下表所示。


|       数据类型       |                                                                                                                 To 整型、浮点型、定点型、`BIT`                                                                                                                 |                                                                                                              To DATE                                                                                                               |                                                                                                                                                           To DATETIME                                                                                                                                                           |                                                                                                                                                            To TIMESTAMP                                                                                                                                                             |                                                                                                                                              To TIME                                                                                                                                              |                                                                                                                                            To YEAR                                                                                                                                            |
|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 整型、浮点型、定点型、`BIT` | 参见大类内的转换规则。                                                                                                                                                                                                                                         | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，转换的数据（以 `YYYYMMDD` 格式来解析）不满足 `DATE` 的取值范围应该会转换失败。   <li> 非严格模式下，如果转换的数据不满足 `DATE`的取值范围，则会转成 `DATE` 的 0 值。</ul>    | 整型、，`BIT`（转成十进制）转`DATETIME`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将整型按照`YYYYMMDDHHMMSS` 格式解析出来，如果转换的数据不满足`DATETIME` 的取值范围，则会报错。   <li> 非严格模式下，将整型按照`YYYYMMDDHHMMSS` 的格式解析出来，如果转换的数据不满足`DATETIME` 的取值范围，则转成`DATETIME` 的 0 值。</ul>    | 整型、，`BIT`（转成十进制）转`TIMESTAMP`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将整型按照`YYYYMMDDHHMMSS` 格式解析出来，如果转换的数据不满足`TIMESTAMP` 的取值范围，则会报错。   <li> 非严格模式下，将整型按照`YYYYMMDDHHMMSS` 的格式解析出来，如果转换的数据不满足`TIMESTAMP` 的取值范围，则转成`TIMESTAMP` 的 0 值。</ul>    | 整型、，`BIT`（转成十进制）转 `TIME`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将整型按照`HHMMSS` 格式解析出来，如果转换的数据不满足 `TIME` 的取值范围，则会报错。   <li> 非严格模式下，将整型按照`HHMMSS` 格式解析出来，如果转换的数据不满足 `TIME` 的取值范围，则转成 `TIME`的 0 值。</ul>    | 整型、，`BIT`（转成十进制）转 `YEAR`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将整型按照 `YYYY` 格式解析出来，如果转换的数据不满足`YEAR` 的取值范围，则会报错。   <li> 非严格模式下，将整型按照 `YYYY` 格式解析出来，如果转换的数据不满足 `YEAR`的取值范围，则转成 `YEAR`的 0 值。</ul>    |
| 整型、浮点型、定点型、`BIT` | 参见大类内的转换规则。                                                                                                                                                                                                                                         | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>  严格模式下，转换的数据（以 `YYYYMMDD` 格式来解析）不满足 `DATE` 的取值范围应该会转换失败。   <li> 非严格模式下，如果转换的数据不满足 `DATE`的取值范围，则会转成 `DATE` 的 0 值。</ul>    | 浮点型转`DATETIME`，则执行 Offline DDL，需要重写数据。没有特别的规则。                                                                                                                                                                                                                                                                                  | 浮点型转`TIMESTAMP`，则执行 Offline DDL，需要重写数据。没有特别的规则。                                                                                                                                                                                                                                                                                     | 浮点型、定点型转`TIME`， 去掉小数部分后，提取整型，然后按照整型规则进行转换。                                                                                                                                                                                                                                                        | 浮点型、定点型转`YEAR`， 去掉小数部分后，提取整型，然后按照整型规则进行转换。                                                                                                                                                                                                                                                    |
| 整型、浮点型、定点型、`BIT` | 参见大类内的转换规则。                                                                                                                                                                                                                                         | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，转换的数据（以 `YYYYMMDD` 格式来解析）不满足 `DATE` 的取值范围应该会转换失败。   <li>非严格模式下，如果转换的数据不满足 `DATE`的取值范围，则会转成 `DATE` 的 0 值。</ul>    | 定点型转`DATETIME`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将整型按照 `YYYYMMDDHHMMSS` 格式解析出来，如果转换的数据不满足`DATETIME` 的取值范围，则会报错   <li> 非严格模式下，将整型按照`YYYYMMDDHHMMSS` 的格式解析出来，如果转换的数据不满足`DATETIME` 的取值范围，则转成`DATETIME` 的 0 值。</ul>                 | 定点型转`TIMESTAMP`，则执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将整型按照 `YYYYMMDDHHMMSS` 格式解析出来，如果转换的数据不满足`TIMESTAMP` 的取值范围，则会报错   <li>非严格模式下，将整型按照`YYYYMMDDHHMMSS` 的格式解析出来，如果转换的数据不满足`TIMESTAMP` 的取值范围，则转成`TIMESTAMP` 的 0 值。</ul>                 | 浮点型、定点型转`TIME`， 去掉小数部分后，提取整型，然后按照整型规则进行转换。                                                                                                                                                                                                                                                        | 浮点型、定点型转`YEAR`， 去掉小数部分后，提取整型，然后按照整型规则进行转换。                                                                                                                                                                                                                                                    |
| `DATE`           | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将 `DATE` 的年月日拼成整数后，如果超过了目标类型的表示范围，则会报错。   <li> 非严格模式下，将`DATE` 的年月日拼成整数后，如果超过了目标类型的表示范围，则截断成最大值。</ul>              | 参见大类内的转换规则。                                                                                                                                                                                                                        | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                     | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                         | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                       | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                   |
| `DATETIME`       | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将 `DATETIME` 的年月日拼成整数后，如果超过了目标类型的表示范围，则会报错。   <li> 非严格模式下，将`DATETIME` 的年月日拼成整数后，如果超过了目标类型的表示范围，则截断成最大值。</ul>       | 参见大类内的转换规则。                                                                                                                                                                                                                        | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                     | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                         | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                       | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                   |
| `TIMESTAMP`      | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，将 `TIMESTAMP` 的年月日拼成整数后，如果超过了目标类型的表示范围，则会报错。   <li> 非严格模式下，将`TIMESTAMP` 的年月日拼成整数后，如果超过了目标类型的表示范围，则截断成最大值。</ul>     | 参见大类内的转换规则。                                                                                                                                                                                                                        | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                     | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                         | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                       | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                   |
| `TIME`           | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将 `TIME` 的分秒拼成整数后，如果超过了目标类型的表示范围，则会报错。   <li> 非严格模式下，将`TIME` 的分秒拼成整数后，如果超过了目标类型的表示范围，则截断成最大值。 </ul>               | 参见大类内的转换规则。                                                                                                                                                                                                                        | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                     | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                         | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                       | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                   |
| `YEAR`           | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将 `YEAR` 转为整数后，如果超过了目标类型的表示范围，则会报错。   <li> 非严格模式下，将`YEAR` 转为整数后，如果超过了目标类型的表示范围，则截断成最大值。</ul>                       | 参见大类内的转换规则。                                                                                                                                                                                                                        | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                     | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                         | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                       | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                   |



### 字符型大类和时间大类转换规则 

字符型大类和时间大类转换规则如下表所示。


|                            数据类型                            |                                                                         To CHAR、BINARY 、VARCHAR 、VARBINARY 、TEXT 大类、 BLOB 大类                                                                          |                                                                                                     To ENUM、 SET                                                                                                      |                                                                                                                                                                   To DATE                                                                                                                                                                   |                                                                                                                                                                        To DATETIME                                                                                                                                                                         |                                                                                                                                                                         To TIMESTAMP                                                                                                                                                                         |                                                                                                                                                                 To TIME                                                                                                                                                                  |                                                                                                                                               To YEAR                                                                                                                                                |
|------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `CHAR`、`BINARY`、`VARCHAR`、`VARBINARY` 、`TEXT` 大类、`BLOB` 大类 | 参见大类内的转换规则。                                                                                                                                                                                           | 参见大类内的转换规则。                                                                                                                                                                                                                           | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li>严格模式下，将字符类型按照`YYYYMMDD` 格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`DATE `的表示范围，则会报错。   <li> 非严格模式下，将字符类型按照`YYYYMMDD` 格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`DATE `的表示范围，则转成`DATE` 的 0 值。</ul>                                   | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将字符类型按照`YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合 `DATETIME` 的表示范围，则会报错。   <li> 非严格模式下，将字符类型按照 `YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合`DATETIME` 的范围，则转成`DATETIME` 的0 值。 </ul>                                 | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将字符类型按照`YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合 `TIMESTAMP` 的表示范围，则会报错。   <li> 非严格模式下，将字符类型按照 `YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合`TIMESTAMP` 的范围，则转成`TIMESTAMP` 的 0 值。 </ul>                               | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将字符类型按照`HHMMSS` 格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`TIME` 的表示范围，则会报错。   <li> 非严格模式下，将字符类型按照`HHMMSS`  格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`TIME `的表示范围，则转成`TIME` 的 0 值。</ul>                                  | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将字符类型按照`YYYY` 格式解析，如果解析出来的数值不符合`YEAR `的表示范围，则会报错。   <li> 非严格模式下，将字符类型按照`YYYY`  格式解析，如果解析出来的数值不符合`YEAR` 的表示范围，则转成`YEAR` 的 0 值。</ul>                                  |
| `ENUM`、 `SET`                              | 参见大类内的转换规则。                                                                                                                                                                                           | 参见大类内的转换规则。                                                                                                                                                                                                                           | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将`ENUM`、`SET`所表示的字符串，按照`YYYYMMDD` 格式解析，其中 `-:`等符号会被去掉，如果解析出来的数值不符合`DATE `的表示范围，则会报错。   <li> 非严格模式下，将`ENUM`、`SET`所表示的字符串按照`YYYYMMDD` 格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`DATE `的表示范围，则转成`DATE` 的 0 值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将`ENUM`、`SET`所表示的字符串按照`YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合 `DATETIME` 的表示范围，则会报错。   <li> 非严格模式下，将`ENUM`、`SET`所表示的字符串按照 `YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合`DATETIME` 的范围，则转成`DATETIME` 的0 值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将`ENUM`、`SET`所表示的字符串按照`YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合 `TIMESTAMP` 的表示范围，则会报错。   <li> 非严格模式下，将`ENUM`、`SET`所表示的字符串按照 `YYYYMMDDHHMMSS` 格式解析，其中 `-:`等符号会被去掉，如果解析出来不符合`TIMESTAMP` 的范围，则转成`TIMESTAMP` 的 0 值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将`ENUM`、`SET`所表示的字符串按照`HHMMSS` 格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`TIME` 的表示范围，则会报错。    <li> 非严格模式下，将`ENUM`、`SET`所表示的字符串按照`HHMMSS`  格式解析，其中 `-:` 等符号会被去掉，如果解析出来的数值不符合`TIME `的表示范围，则转成`TIME` 的 0 值。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，将`ENUM`、`SET`所表示的字符串按照`YYYY` 格式解析，如果解析出来的数值不符合`YEAR `的表示范围，则会报错。    <li> 非严格模式下，将`ENUM`、`SET`所表示的字符串按照`YYYY`  格式解析，如果解析出来的数值不符合`YEAR` 的表示范围，则转成`YEAR` 的 0 值。</ul>    |
| `DATE`                                                     | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换的数据超过字符类型的长度时，会报错。   <li> 非严格模式下，如果转换的数据超过字符类型的长度，则会被截断。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，会被截断并转成空字符串。</ul>    | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                 | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                  | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                              | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                          |
| `DATETIME`                                                 | 执行 Offline DDL，需要重写数据。转换规则如下：<ul><li> 严格模式下，如果转换的数据超过字符类型的长度时，会报错。   <li> 非严格模式下，如果转换的数据超过字符类型的长度，则会被截断。    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，会被截断并转成空字符串。 </ul>   | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                 | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                  | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                              | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                          |
| `TIMESTAMP`                                                | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换的数据超过字符类型的长度时，会报错。   <li> 非严格模式下，如果转换的数据超过字符类型的长度，则会被截断。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，会被截断并转成空字符串。</ul>    | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                 | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                  | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                              | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                          |
| `TIME`                                                     | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换的数据超过字符类型的长度时，会报错。   <li> 非严格模式下，如果转换的数据超过字符类型的长度，则会被截断。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，会被截断并转成空字符串。</ul>    | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                 | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                  | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                              | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                          |
| `YEAR`                                                     | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换的数据超过字符类型的长度时，会报错。   <li> 非严格模式下，如果转换的数据超过字符类型的长度，则会被截断。</ul>    | 执行 Offline DDL，需要重写数据。转换规则如下： <ul><li> 严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，则会报错。   <li> 非严格模式下，如果转换数据不属于 `ENUM` 和 `SET`定义的值时，会被截断并转成空字符串。</ul>    | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                 | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                                                  | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                                                              | 参见大类内的转换规则。                                                                                                                                                                                                                                                                                          |




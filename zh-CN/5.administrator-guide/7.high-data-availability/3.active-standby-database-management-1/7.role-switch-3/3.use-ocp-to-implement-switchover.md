通过 OCP 执行 Switchover 流程 
============================================

OceanBase 数据库支持通过 OCP 进行 Switchover 流程，进行主备集群一键切换。

切换前准备 
--------------------------

进行角色切换前，需要先获取集群信息以及选择合适的备集群。

详细的操作，参见 [切换前准备](/zh-CN/5.administrator-guide/7.high-data-availability/3.active-standby-database-management-1/7.role-switch-3/1.preparations-before-switching-1.md)。

执行 Switchover 
----------------------------------

1. 使用具备管理员权限的账号登录 OCP。

   默认进入 **集群** 页面。
   

2. 在 **集群列表** 区域，单击主集群名，跳转到主集群详情页面。

   

3. 在左侧导航栏上，单击 **拓扑图** 。

   在拓扑图上，如下图所示，集群 100054 是主集群，100052 是备集群。备集群当前处于同步状态。

   ![拓扑图](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6664348461/p167739.png)
   

4. 如果希望把 100052 号集群切换为主集群，则在拓扑图上单击更多图标，选择 **切为主集群** ，并在弹出的对话框中，单击 **日常切换** 。

   创建任务成功。

   ![角色切换](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6664348461/p167740.png)
   

5. 单击 **查看任务** ，查看任务执行情况。

   如下图所示，主备切换任务执行成功。如果切换过程中出现错误，则 OCP 会产生告警信息，根据告警信息去做相应的处理。

   ![查看任务执行情况](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6664348461/p167741.png)

   再查看切换成功的拓扑图，100052 号集群切换为主集群，100054 号集群切换为备集群，延迟为 0.2 秒。

   ![查看切换成功的拓扑图](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6664348461/p167743.png)
   




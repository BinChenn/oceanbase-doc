通过 OCP 执行 Failover 流程 
==========================================

当主集群不可用的情况下，您还可以通过 OCP 将备集群切换为新的主集群继续提供服务。

注意事项 
-------------------------

当前仅支持通过 OCP 执行有损 Failover 流程，对于无损 Failover 流程，需要通过命令行来执行，具体操作请参见 [执行无损 Failover 流程](/zh-CN/5.administrator-guide/7.high-data-availability/3.active-standby-database-management-1/7.role-switch-3/4.run-a-failover-command-from-the-command-line-1/2.perform-lossless-failover-process.md)。

前提条件 
-------------------------

在进行操作前，需要确认以下事项：

* 当前集群为备集群。

  

* 当前集群的主集群已停止或不可用。

  

* 当前 OceanBase 数据库为 V2.2.76 及以上版本。

  

* 当前 OCP 版本为 V3.1.0 及以上版本。

  




操作步骤 
-------------------------

1. 登录 OCP。

   

2. 单击左侧导航栏上的 **集群** 。

   

3. 在集群列表中找到待操作的备集群，并单击集群名，进入备集群的 **总览** 页面。

   

4. 在页面右上角，单击 **...** 图标，选择 **切为主集群：容灾切换** 。

   ![容灾切换](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2738242261/p278341.png)
   

5. 在弹出的对话框中，单击 **容灾切换** 。

   ![正在切换](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2738242261/p278346.png)
   

6. 完成后，返回首页，在左侧导航栏上单击 **系统管理\>任务** ，可以查看任务进度。如果容灾切换过程中出错会产生 OCP 告警信息，根据告警信息去做相应的处理。

   **说明**

   
   * 容灾切换成功后，原主集群不会转化为备集群，而是成为一个独立的废弃集群，建议从 OCP 删除该集群，删除备集群相关操作请参见 [删除备集群](/zh-CN/5.administrator-guide/7.high-data-availability/3.active-standby-database-management-1/9.delete-a-secondary-cluster-1.md)。

     
   
   * 容灾切换成功后，原主集群的其它备集群与新的主集群无法同步数据，建议从 OCP 删除该备集群，删除备集群相关操作请参见 [删除备集群](/zh-CN/5.administrator-guide/7.high-data-availability/3.active-standby-database-management-1/9.delete-a-secondary-cluster-1.md)。

     
   

   
   




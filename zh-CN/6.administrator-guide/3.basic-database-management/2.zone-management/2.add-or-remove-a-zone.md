增加或删除 Zone 
===============================

您可以通过命 SQL 语句或 OCP 来增加或删除 Zone。

通过 SQL 语句增加或删除 Zone 
----------------------------------------

在集群中增加或删除 Zone 的操作通常用于集群扩容或缩容等需求场景。

增加或删除 Zone 的 SQL 语句如下：

```sql
ALTER SYSTEM {ADD|DELETE} ZONE zone_name;
```



其中，参数 `zone_name` 为目标 Zone 的名称

在删除 Zone 前，需要保证该 Zone 下已不存在 OBServer，否则可能会导致删除失败。

示例：

* 在集群中新增一个名为 `zone1`的 Zone。

  ```sql
  obclient> ALTER SYSTEM ADD ZONE zone1;
  ```

  

* 在集群中删除名为 `zone1` 的 Zone。

  ```sql
  obclient> ALTER SYSTEM DELETE ZONE zone1;
  ```

  




通过 OCP 增加 Zone 
-----------------------------------

**说明**



不同 OCP 版本的操作界面可能不同，本节以 OCP V3.1.0 版本为例提供操作指导，OCP 其他版本的操作请参考对应版本的《 OCP 用户指南》文档。

在集群中，根据实际部署模式增加 Zone。

1. 登录 OCP。默认进入 **集群概览** 页面。

   

2. 在 **集群概览** 页面的 **集群列表** 区域，选择待操作的集群并单击其集群名。

   

3. 在 **总览** 页面右上角，单击 **新增 Zone** 。

   

4. 在弹出的对话框中，设置 Zone 信息。

   默认是添加一个 Zone 信息，如果您需要添加多个 Zone ，可以在下方单击 **新增** 按钮，添加个 Zone 信息。
   **说明**

   

   Zone 中的主机硬件架构需与集群的硬件架构保持一致。

   ![1](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6377960261/p271613.png)需要设置的 Zone 信息如下表所示。
   

   | **配置**  |                                                               **描述**                                                               |
   |---------|------------------------------------------------------------------------------------------------------------------------------------|
   | Zone 名称 | 自定义 Zone 名称。                                                                                                                       |
   | 机房      | Zone 所在的机房。                                                                                                                        |
   | 机型      | 可选项。 如果选择了机型，后面主机列表会根据机型进行过滤。                                                                                      |
   | 机器选择方式  | 可以选择 **自动分配** 或者 **手动选择** 。                                                                                                        |
   | IP      | 您可以选择多个 IP。 如果 **机器选择方式** 是 **自动分配** ，则只需要输入机器的数量，OCP 会自动选择相应数量的可用机器；如果 **机器选择方式** 是 **手动选择** ，则需要您手动从列表中选择若干个 IP。 |

   

5. 完成后，单击 **确定** 。

   




通过 OCP 删除 Zone 
-----------------------------------

在集群中，根据实际部署模式下线 Zone。
**注意**



相比停止和删除 Zone 命令，OCP 中提供的删除 Zone 功能是删除数据副本并下线 Zone 内所有 OceanBase 服务器节点操作的组合。

1. 登录 OCP 。默认进入 **集群概览** 页面。

   

2. 在 **集群概览** 页面的 **集群列表** 区域，选择待操作的集群并单击其集群名。

   

3. 在 **Zone 列表** 区域，单击 **操作** 列后的 **删除** 。

   

4. 在弹出框中单击 **删除** 。![1](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6597960261/p271657.png)

   




修改资源单元的配置 
==============================

修改资源单元的配置可以动态调整租户的资源单元大小，实现租户节点内的动态扩容或缩容功能。

通过 SQL 语句修改 
--------------------------------

在增加资源的过程中必须保证 OBServer 有足够的剩余资源可用于分配。可以通过内部表 `_all_virtual_server_stat` 查询节点总资源和已经分配的资源，然后通过计算可知是否可以修改资源单元。

修改资源单元的语句如下：

```sql
ALTER RESOURCE UNIT unitname 
MAX_CPU [=] cpunum, 
MAX_MEMORY [=] memsize, 
MAX_IOPS [=] iopsnum, 
MAX_DISK_SIZE [=] disksize, 
MAX_SESSION_NUM [=] sessionnum, 
[MIN_CPU [=] cpunum,]
[MIN_MEMORY [=] memsize,] 
[MIN_IOPS [=] iopsnum] ;
```



修改资源单元 `unit1` 的示例如下：

```sql
obclient> ALTER RESOURCE UNIT unit1  MAX_CPU 15, MAX_MEMORY '20G', MAX_IOPS 128,max_disk_size '100G', MAX_SESSION_NUM 64, MIN_CPU=10, MIN_MEMORY='10G', MIN_IOPS=128;
```



通过 OCP 修改 
------------------------------

Unit 规格即为资源单元。您可以根据需要修改自定义的 Unit 规格，OCP 系统默认的 Unit 规格不支持修改。
**说明**



不同 OCP 版本的操作界面可能不同，本节以 OCP V3.1.0 版本为例提供操作指导，OCP 其他版本的操作请参考对应版本的《 OCP 用户指南》文档。

1. 登录 OCP。

   

2. 在左侧导航栏上，单击 **租户** 。

   

3. 在页面右上角，单击 **Unit 规格管理** ，进入 **Unit 规格管理** 页面。

   

4. 在 **规格类型** 为 **自定义** 的 Unit 规格中，找到待修改的 Unit 规格，并在对应的 **操作** 列中，单击 **修改** 。

   

5. 修改 CPU 和内存的范围，单击 **确定** 。

   ![修改 Unit 规格](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9073442261/p275657.png)
   




# 创建资源规格

在创建租户前，需要先确定租户的资源规格和资源使用范围。本文介绍如何创建资源规格。

资源规格是指资源单元的规格，资源单元是资源调度使用的基本单位，在不同场景中，会用到不同大小的资源单元，就需要通过 `CREATE RESOURCE UNIT` 来创建合适的资源规格，从而可以调度使用相应大小的资源单元。

## 操作步骤

1. 使用 root 用户登录到数据库的 sys 租户。

    ```sql
    $obclient -h172.30.xxx.xxx -P2883 -uroot@sys#cluster -pxxxx -A
    ```

2. 进入 OceanBase 数据库。

    ```sql
    obclient> USE oceanbase;
    ```

3. 通过 `DBA_OB_UNIT_CONFIGS` 视图，获取当前租户中的资源配置信息。

    ```sql
    obclient [oceanbase]> SELECT * FROM DBA_OB_UNIT_CONFIGS;
    +----------------+-------------------------------+----------------------------+----------------------------+---------+---------+-------------+---------------+----------+----------+-------------+
    | UNIT_CONFIG_ID | NAME                          | CREATE_TIME                | MODIFY_TIME                | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
    +----------------+-------------------------------+----------------------------+----------------------------+---------+---------+-------------+---------------+----------+----------+-------------+
    |              1 | sys_unit_config               | 2022-12-20 17:50:17.035504 | 2022-12-20 17:50:17.035504 |       1 |       1 | 14495514624 |   14495514624 |    10000 |    10000 |           1 |
    |           1001 | config_mysql001_zone1_S1_okz  | 2022-12-20 18:04:31.547715 | 2022-12-20 18:04:31.547715 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1002 | config_mysql001_zone2_S1_pme  | 2022-12-20 18:04:31.561335 | 2022-12-20 18:04:31.561335 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1003 | config_mysql001_zone3_S1_jsu  | 2022-12-20 18:04:31.564510 | 2022-12-20 18:04:31.564510 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1010 | config_oracle002_zone2_S1_zhb | 2022-12-26 17:55:57.240370 | 2022-12-26 17:55:57.240370 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1011 | config_oracle002_zone1_S1_jfv | 2022-12-26 17:55:57.244539 | 2022-12-26 17:55:57.244539 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1012 | config_oracle002_zone3_S1_atj | 2022-12-26 17:55:57.263536 | 2022-12-26 17:55:57.263536 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1013 | config_oracle001_zone3_S1_exu | 2022-12-26 18:28:37.969047 | 2022-12-26 18:28:37.969047 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1014 | config_oracle001_zone2_S1_hli | 2022-12-26 18:28:37.972194 | 2022-12-26 18:28:37.972194 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    |           1015 | config_oracle001_zone1_S1_owy | 2022-12-26 18:28:37.976446 | 2022-12-26 18:28:37.976446 |     1.5 |     1.5 |  6442450944 |   19327352832 |    15000 |    15000 |           1 |
    +----------------+-------------------------------+----------------------------+----------------------------+---------+---------+-------------+---------------+----------+----------+-------------+
    12 rows in set
    ```

   该视图的详细说明，请参见 [oceanbase.DBA_OB_UNIT_CONFIGS](../../../7.reference/5.system-reference/4.system-view-of-mysql-mode/2.dictionary-view-of-mysql-mode/60.oceanbase-dba_ob_unit_configs-of-mysql-mode.md)。

4. 通过 `CREATE RESOURCE UNIT` 语句，创建名为 `S1_unit_config` 的资源规格。

    ```sql
    obclient> CREATE RESOURCE UNIT S1_unit_config
        MAX_CPU = 1, MIN_CPU = 1,
        MEMORY_SIZE = '2G',
        LOG_DISK_SIZE = '6G',
        MAX_IOPS = 10000, MIN_IOPS = 10000, IOPS_WEIGHT=1;
    ```

   `CREATE RESOURCE UNIT` 语句的详细说明，请参见 [CREATE RESOURCE UNIT](../../../7.reference/4.development-guide-refactoring/1.sql-syntax/1.system-tenants/7.create-resource-unit.md)。

5. 查询 `DBA_OB_UNIT_CONFIGS` 视图，确认创建成功。

    ```sql
    obclient> SELECT * FROM DBA_OB_UNIT_CONFIGS where name = 'S1_unit_config';
    +----------------+----------------+----------------------------+----------------------------+---------+---------+-------------+---------------+----------+----------+-------------+
    | UNIT_CONFIG_ID | NAME           | CREATE_TIME                | MODIFY_TIME                | MAX_CPU | MIN_CPU | MEMORY_SIZE | LOG_DISK_SIZE | MAX_IOPS | MIN_IOPS | IOPS_WEIGHT |
    +----------------+----------------+----------------------------+----------------------------+---------+---------+-------------+---------------+----------+----------+-------------+
    |           1016 | S1_unit_config | 2023-01-03 14:15:17.727584 | 2023-01-03 17:04:35.667314 |       1 |       1 |  2147483648 |    6442450944 |    10000 |    10000 |           1 |
    +----------------+----------------+----------------------------+----------------------------+---------+---------+-------------+---------------+----------+----------+-------------+
    1 row in set
    ```

## 更多信息

创建资源规格后，可以在创建资源池时指定资源规格，从而使用相应大小的资源单元，并最终分配给相应的租户，详细操作，请参见：

* [创建资源池](2.create-resource-pool.md)

* [创建租户](3.create-tenant.md)

* [修改资源单元的配置](5.modify-resource-specifications.md)

* [删除资源单元](12.delete-resource-specification.md)

# 创建租户

本文介绍如何通过 SQL 语句创建租户。

## 前提条件

创建租户需要有可用的资源池，创建资源池需要有相应的资源规格，所以创建租户的一般顺序为：创建资源规格 > 创建资源池 > 创建租户。创建租户之前，请确保有可用的资源池。

有关创建资源规格和资源池的详细操作，参见 [创建资源规格](1.create-resource-specifications.md) 和 [创建资源池](2.create-resource-pool.md)。

## 操作步骤

>**注意**
>
>OceanBase 数据库支持两种类型的租户，MySQL 模式和 Oracle 模式。创建租户时，您需要指定租户的类型。租户创建后，租户类型无法修改，因此创建租户前请规划好您的租户类型。

1. 使用 root 用户登录到数据库的 sys 租户。

    ```sql
    $obclient -h172.30.xxx.xxx -P2883 -uroot@sys#cluster -pxxxx -A
    ```

2. 进入 OceanBase 数据库。

    ```sql
    obclient> USE oceanbase;
    ```

3. 通过 `DBA_OB_TENANTS` 视图，查看所有的租户信息。

    ```sql
    obclient [oceanbase]> select * from DBA_OB_TENANTS;
    +-----------+-------------+-------------+----------------------------+----------------------------+-------------------+---------------------------------------------+-------------------+--------------------+--------+---------------+--------+
    | TENANT_ID | TENANT_NAME | TENANT_TYPE | CREATE_TIME                | MODIFY_TIME                | PRIMARY_ZONE      | LOCALITY                                    | PREVIOUS_LOCALITY | COMPATIBILITY_MODE | STATUS | IN_RECYCLEBIN | LOCKED |
    +-----------+-------------+-------------+----------------------------+----------------------------+-------------------+---------------------------------------------+-------------------+--------------------+--------+---------------+--------+
    |         1 | sys         | SYS         | 2022-12-20 17:50:17.056814 | 2022-12-20 17:51:16.162367 | zone1;zone2;zone3 | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | MYSQL              | NORMAL | NO            | NO     |
    |      1001 | META$1002   | META        | 2022-12-20 18:04:31.683655 | 2023-01-06 14:40:57.872880 | zone1;zone2       | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | MYSQL              | NORMAL | NO            | NO     |
    |      1002 | mysql001    | USER        | 2022-12-20 18:04:31.689731 | 2023-01-06 14:40:57.872880 | zone1;zone2       | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | MYSQL              | NORMAL | NO            | NO     |
    |      1007 | META$1008   | META        | 2022-12-26 17:55:57.356089 | 2022-12-26 17:56:20.452948 | zone1;zone2;zone3 | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | MYSQL              | NORMAL | NO            | NO     |
    |      1008 | oracle002   | USER        | 2022-12-26 17:55:57.357098 | 2022-12-26 17:56:20.490809 | zone1;zone2;zone3 | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | ORACLE             | NORMAL | NO            | NO     |
    |      1009 | META$1010   | META        | 2022-12-26 18:28:38.055294 | 2022-12-26 18:29:01.184333 | zone1;zone2;zone3 | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | MYSQL              | NORMAL | NO            | NO     |
    |      1010 | oracle001   | USER        | 2022-12-26 18:28:38.056350 | 2022-12-26 18:29:01.223246 | zone1;zone2;zone3 | FULL{1}@zone1, FULL{1}@zone2, FULL{1}@zone3 | NULL              | ORACLE             | NORMAL | NO            | NO     |
    +-----------+-------------+-------------+----------------------------+----------------------------+-------------------+---------------------------------------------+-------------------+--------------------+--------+---------------+--------+
    9 rows in set
    ```

   `DBA_OB_TENANTS` 视图的详细说明，请参见 [oceanbase.DBA_OB_TENANTS](../../../7.reference/5.system-reference/4.system-view-of-mysql-mode/2.dictionary-view-of-mysql-mode/58.oceanbase-dba_ob_tenants-of-mysql-mode.md)

4. 通过 create tenant 语句，创建租户。

   在本示例中，创建了一个名为 mq_t1 的租户（默认为 MySQL 模式租户），副本数为 2，资源池指定为 mq_pool_01，primary zone 为 zone1。

    ```sql
    obclient> create tenant if not exists mq_t1 
        replica_num=2, 
        primary_zone='zone1', 
        resource_pool_list=('mq_pool_01');
    ```

   `CREATE TENANT` 语句的详细说明，请参见 [CREATE TENANT](../../../7.reference/4.development-guide-refactoring/1.sql-syntax/1.system-tenants/8.create-tenant.md)。

5. 再通过 `DBA_OB_TENANTS` 视图，确认创建成功。

    ```sql
    obclient> SELECT * FROM DBA_OB_TENANTS where tenant_name = 'mq_t1';
    +-----------+-------------+-------------+----------------------------+----------------------------+--------------+------------------------------+-------------------+--------------------+--------+---------------+--------+
    | TENANT_ID | TENANT_NAME | TENANT_TYPE | CREATE_TIME                | MODIFY_TIME                | PRIMARY_ZONE | LOCALITY                     | PREVIOUS_LOCALITY | COMPATIBILITY_MODE | STATUS | IN_RECYCLEBIN | LOCKED |
    +-----------+-------------+-------------+----------------------------+----------------------------+--------------+------------------------------+-------------------+--------------------+--------+---------------+--------+
    |      1014 | mq_t1       | USER        | 2023-01-06 15:39:57.422331 | 2023-01-06 15:40:17.716355 | zone1;zone2  | FULL{1}@zone1, FULL{1}@zone2 | NULL              | MYSQL              | NORMAL | NO            | NO     |
    +-----------+-------------+-------------+----------------------------+----------------------------+--------------+------------------------------+-------------------+--------------------+--------+---------------+--------+
    1 row in set
    ```

## 更多信息

租户创建后，您可以对租户配置进行查看和维护。详细操作，请参见：

* [查看租户和资源信息](4.view-tenant-information.md)

* [修改租户属性](7.modify-tenant-properties.md)

* [删除租户](9.delete-tenant.md)

* [恢复租户](10.restore-tenant.md)
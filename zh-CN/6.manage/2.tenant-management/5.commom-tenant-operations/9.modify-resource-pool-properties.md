# 修改资源池属性

修改资源池属性，即是调整资源池配置中的 unit、unit_num、ZONE_LIST 等参数信息。本文介绍如何修改资源池属性。

资源池属性可以通过 `ALTER RESOURCE POOL` 语句进行修改。

修改资源池属性是实现租户扩容或缩容的另一种方式。例如，修改 `UNIT_NUM` 可以增加或减少每个 Zone 中节点数量达到扩容或缩容的目的。

## 操作步骤

1. 使用 root 用户登录到数据库的 sys 租户。

    ```sql
    $obclient -h172.30.xx.xx -P2883 -uroot@sys#cluster -p**** -A
    ```

2. 进入 OceanBase 数据库。

    ```sql
    obclient [(none)]> USE oceanbase;
    ```

3. 通过 `DBA_OB_RESOURCE_POOLS` 视图，获取资源池 `mq_pool_02` 的配置信息。

    ```sql
    obclient [oceanbase]> SELECT * FROM DBA_OB_RESOURCE_POOLS where name = 'mq_pool_02';
    +------------------+------------+-----------+----------------------------+----------------------------+------------+----------------+-------------+--------------+
    | RESOURCE_POOL_ID | NAME       | TENANT_ID | CREATE_TIME                | MODIFY_TIME                | UNIT_COUNT | UNIT_CONFIG_ID | ZONE_LIST   | REPLICA_TYPE |
    +------------------+------------+-----------+----------------------------+----------------------------+------------+----------------+-------------+--------------+
    |             1026 | mq_pool_02 |      NULL | 2023-01-10 23:54:24.177685 | 2023-01-10 23:54:24.177685 |          1 |           1020 | zone1;zone2 | FULL         |
    +------------------+------------+-----------+----------------------------+----------------------------+------------+----------------+-------------+--------------+
    1 row in set
    ```

    `DBA_OB_RESOURCE_POOLS` 视图的详细说明，请参见 [oceanbase.DBA_OB_RESOURCE_POOLS](../../../7.reference/5.system-reference/4.system-view-of-mysql-mode/2.dictionary-view-of-mysql-mode/47.oceanbase-dba_ob_resource_pools-of-mysql-mode.md)。

4. 通过 `ALTER RESOURCE POOL` 语句，修改资源池配置。

    <main id="notice" type='notice'>
     <h4>注意</h4>
     <p><ul><li>单条语句只能修改一个属性，如果需要同时修改 UNIT，UNIT_NUM，ZONE_LIST 中两条及以上的属性，需要分多条语句执行。</li><li> 如果该资源池已经被租户使用，只允许修改 UNIT 和 ZONE_LIST，修改 UNIT_NUM 将会报错。并且 UNIT_NUM 的最大值为单个 zone 内的 OBServer 服务数量，修改结果超过相应上线也会报错。</li><li> 修改 ZONE_LIST 时，每次仅支持添加或删除一个 Zone。</li></ul></p>
    </main>

    修改资源池 `mq_pool_02` 的资源规格为 `'S2_unit_config'`，资源单元个数为 2，zone_list 为 `'zone1','zone2','zone3'`。

    ```sql
    obclient [oceanbase]> ALTER RESOURCE POOL mq_pool_02 unit='S2_unit_config';
    Query OK, 0 rows affected

    obclient [oceanbase]> ALTER RESOURCE POOL mq_pool_02 unit_num=2;
    Query OK, 0 rows affected

    obclient [oceanbase]> ALTER RESOURCE POOL mq_pool_02 ZONE_LIST=('zone1','zone2','zone3');
    Query OK, 0 rows affected
    ```

    参数说明：

    * unit：资源规格名称。
    * unit_num：资源单元个数。
    * zone_list：zone 列表。

    `ALTER RESOURCE POOL` 语句的详细说明，请参见 [ALTER RESOURCE POOL](../../../7.reference/4.development-guide-refactoring/1.sql-syntax/1.system-tenants/3.alter-resource-pool.md)。

5. 查看 `DBA_OB_RESOURCE_POOLS` 视图，确认修改结果。

    结果如下，可以看到 UNIT_COUNT、UNIT_CONFIG_ID、ZONE_LIST 参数已经更新。

    ```sql
    obclient [oceanbase]> SELECT * FROM DBA_OB_RESOURCE_POOLS WHERE NAME = 'mq_pool_02';
    +------------------+------------+-----------+----------------------------+----------------------------+------------+----------------+-------------------+--------------+
    | RESOURCE_POOL_ID | NAME       | TENANT_ID | CREATE_TIME                | MODIFY_TIME                | UNIT_COUNT | UNIT_CONFIG_ID | ZONE_LIST         | REPLICA_TYPE |
    +------------------+------------+-----------+----------------------------+----------------------------+------------+----------------+-------------------+--------------+
    |             1026 | mq_pool_02 |      NULL | 2023-01-10 23:54:24.177685 | 2023-01-10 23:56:04.961771 |          2 |           1021 | zone1;zone2;zone3 | FULL         |
    +------------------+------------+-----------+----------------------------+----------------------------+------------+----------------+-------------------+--------------+
    1 row in set
    ```

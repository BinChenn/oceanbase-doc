# 总结

通过对分区、分片、日志流、资源组、日志流组的介绍，做一总结：

* 通过设置租户的 Unit Number 和 Primary Zone，定义了一组 承载业务流量的 Unit 集合，其个数为两者个数之乘积。每个 Unit 放置于一个节点上，从而可以方便的实现租户容量的水平扩展。
  
* 系统为每个 Zone 的 Unit 进行编号，相同编号的 Unit 组成一个 Unit Group。Unit Group 内 所有 Unit 上的数据分布相同，即每个 Unit Group 框定了一组数据。
  
* 分区是用户创建的逻辑对象，Tablet 与其一一对应，是实际承载数据的物理存储单位。
  
* 日志流代表每个 Unit Group 框定的一组数据，包括若干 Tablet 和有序的 RedoLog 日志流。通过 Paxos 协议实现了多副本日志同步，保证副本间数据的一致性，从而实现了数据的高可用。日志流也是事务的提交单位，事务修改在单个日志流内完成时可以采用一阶段原子提交；事务修改跨多个日志流时，采用 OceanBase 优化的两阶段提交协议完成原子提交，日志流是分布式事务的参与者。
  
* Unit Group 与日志流组一一对应，在每个日志流组中，日志流的个数由 Primary Zone 的 Zone 个数决定。从而 Primary Zone 的 Zone 列表中的每个 Zone 都可以分布着日志流组中一个日志流的 Leader。

![1](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/observer-enterprise/V4.0.0/easy-of-use/manage/replica-management/replica-fine-granularity/replica-fine-grained-concept.png)

OceanBase 数据库从多个层面将数据和流量灵活分布于多个节点上：

* Unit 可以在节点之间迁移以实现节点均衡，Unit 在节点之间迁移可参见 [副本迁移](../2.replica-distribution/2.common-operations/7.replica-migration.md)；

* 日志流可以通过分裂和合并以实现租户的扩缩容，详细可参见 [通过调整 Unit Number 实现租户扩缩容](../5.tenant-expansion-and-contraction/3.adjust-unit-number.md)和 [调整 Primary Zone](../5.tenant-expansion-and-contraction/4.adjust-primary-zone.md)；

* Tablet 可以在日志流之间迁移以实现日志流的分区均衡。

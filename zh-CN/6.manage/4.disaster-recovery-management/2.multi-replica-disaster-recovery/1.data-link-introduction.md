# 数据链路介绍

OceanBase 数据库采用 APPServer <-> OBProxy  <-> OBServer 的数据链路。APPServer 通过数据库驱动连接 OBProxy 发送请求，由于 OceanBase 数据库的分布式架构，用户数据以多日志流多副本的方式分布于多个 OBServer 上，OBProxy 将用户请求转发到最合适的 OBServer 上执行，并将执行结果返回用户。每个 OBServer 也有路由转发的功能，如果发现请求不能在当前节点执行，则会转发请求到正确的 OBServer，该场景需要进行一次远程执行，对请求的 RT（Response Time） 会有一定影响。

![数据链路图](https://intranetproxy.alipay.com/skylark/lark/0/2023/png/5119/1672901981876-b3d53a5e-acb9-42c1-9aef-d79ec1d84a8a.png)

OBProxy 是 OceanBase 数据库的反向代理层，提供了从用户端到数据库端的路由选择和容灾功能，屏蔽应用程序对分布式数据库的感知。OBServer 包含完整的 SQL 引擎、存储引擎和分布式事务引擎，负责解析 SQL 生成物理执行计划并执行，及事务提交时通过 Paxos 协议达成多数派提交，提供高性能、高可用、高扩展的数据库服务。OBProxy 和 OBServer 采用松耦合的方式，允许 OBProxy 上的路由信息更新不及时导致错误的路由选择，OBServer 内部会再转发一次，返回结果时通知 OBProxy 更新路由信息。

如上所述，应用层将用户请求发送到代理服务 OBProxy ，经过 OBProxy 的路由后，发送到实际服务数据的数据库节点 OBServer ，执行结果沿着反向路径返回给应用层。整个链路中的组件通过不同的方式来达到高可用能力。

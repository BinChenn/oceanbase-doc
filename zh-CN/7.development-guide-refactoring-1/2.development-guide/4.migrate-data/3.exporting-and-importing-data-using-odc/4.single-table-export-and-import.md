单表导出与导入 
============================

OceanBase 开发者中心（OceanBase Developer Center，ODC）支持对指定表导出和导入结构和数据。本文介绍如何通过 ODC 单表导出和导入。

文件限制 
-------------------------

OceanBase 开发者中心（ODC）对导出与导入数据大小和保留时间的要求如下：


|         要求         |                                                                                                             说明                                                                                                              |
|--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ODC 对导入与导出的数据大小有限制 | * 对导入上传的文件，最大支持导出 2GB 的数据（压缩后），超出部分无法上传。如需导入大量数据，请使用导数工具 OBLOADER。   * 对导出的数据，最大支持导出 2GB 的数据（压缩前），超出部分无法导出。如需导出大量数据，请使用导数工具 OBDUMPER。    |
| 服务器上文件保留时间         | * 任务的状态（成功，失败，取消等）不影响文件的生命周期。   * 目前 ODC V3.3.0 版本中，任务文件会保留 14 天，到期后，任务相关的文件会被清除。                                                        |



单表导出 
-------------------------

下文以 ODC V3.3.0 版本为例，进行数据库内容的单表导出操作。更多的版本使用，请参考 [OceanBase 开发者中心](https://www.oceanbase.com/docs/oceanbase-developer-center/odc/V3.3.0/product-updates)。

1. 进入数据库连接后，左导航栏中单击 **表** 标签查看表列表，在表列表中右键目标表名，在弹出的列表中您可以选择使用 **单表导出** 功能以导出当前表中的数据和结构。![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6360069161/p269206.png)

   

2. 单表导出的操作页面 **，** 导出配置参数说明如下：![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4365784361/p269207.png)

   

   |       参数       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **任务名**        | 进入导出设置面板后，ODC 会在 **任务名** 文本框中自动生成默认任务名（连接名_模式名_日期），您也可以在文本框中自主修改任务名。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   | **导出内容**       | ODC 目前支持 **仅导出数据** 、 **仅导出结构** 和 **导出结构和内容** 三种方式 **。** 其中导出结构指是否要导出目标对象的定义语句。您需要在 **导出内容** 标签下的选择框中勾选需要导出的内容。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **数据格式**       | ODC 目前支持将数据导出为 **CSV 格式** 和 **SQL 格式** 。当 **导出内容** 为 **仅导出结构** 时，只支持导出数据为 SQL 格式。具体格式信息，请参见 [导数文件格式](../3.exporting-and-importing-data-using-odc/2.derivative-file-format.md)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   | **文件编码**       | ODC 目前支持 **ASCII** 、 **ISO-8859-1** 、 **GB2312** 、 **GBK** 、 **GB18030** 、 **Unicode（UTF-8）** 、 **Unicode（UTF-16）** 、 **Unicode（UTF-32）** 和 **BIG5** 等编码格式。您需要在 **文件编码** 下拉框中选择需要的编码格式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | **导出对象**       | 在 **导出对象** 标签下的表格中会展示当前表的 **对象名称** 和 **对象类型** 信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **导出数据设置**     | 该项包含以下设置项： * **使用全局快照** ：勾选该项后 ODC 将导出全局中指定表的最新快照点中的数据，勾选该项可以保证全局数据的一致性。   * **单表提交数量** （SQL 格式）：单击 **导出数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定该项。选择 **数据格式** 为 SQL 格式时，通过指定单表提交数量，可在导出文件中导出指定数量数据时添加一句 `COMMIT` 命令。   * **不导出的数据类型** ：单击 **导出数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定该项。您可以通过该项指定导出数据时要跳过的数据类型。MySQL 和 Oracle 下可跳过的类型不同，支持多选。   * 指定 CSV 格式信息。当 **数据格式** 为 CSV 格式且 **导出内容** 不为仅导出结构时，单击 **导出数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定以下信息： * **包含列头** ：该项默认勾选，选择导出数据为 CSV 格式时是否包含列头。   * **空字符串转为空值** ：该项默认勾选，选择导出数据为 CSV 格式时是否将表中的空字符串转换为空值 `\N`。   * **字段分隔符** ：设置字段间的分隔符。支持选择逗号（,）、分号（;）和冒号（:）作为字段分割符。同时支持自定义一个字符长度的字符作为分隔符。   * **文本识别符** ：设置文本内容的识别符。支持选择单引号（'）和双引号（"）作为文本识别符。   * **换行符号** ：设置换行符。支持选择 **\\n** 、 **\\r** 和 **\\r\\n** 作为换行符。      |
   | **导出结构设置**     | 在该项下选择是否 **添加删除对象语句** 。勾选后在导出对象结构文件时，在对象的 `CREATE` 语句前都会添加对应的 `DROP` 语句。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | **sys 租户账号配置** | 在该项下选择是否 **使用 sys 租户账号提升导出速度** 。勾选后在弹出的 **账户** 和 **密码** 文本框中填写 sys 租户下的用户名和对应的密码。设置好该项后会使用 sys 租户的权限进行导出，可提升导出的速度。 **注意**  * **sys 租户账号和密码** 为集群租户下用户的账号和密码 (账号请勿填入"@sys#集群")。   * 导出时如勾选表和视图之外的其它对象，须配置该项使用 sys 租户账号进行导出。   * 如未配置 sys租户账号，会导致导入导出缺注释和索引。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

   

3. 生成导出任务。

   指定好所有信息后，单击面板右下角的 **导出** 按钮以生成导出任务。
   

4. 查看导出任务。

   任务生成后会自动弹出 **任务中心** 面板，在任务中心您可以查看任务信息并下载导出的数据结构文件。详情请参见 [导出任务](https://www.oceanbase.com/docs/oceanbase-developer-center/odc/V3.2.2/export-tasks-2)。
   




单表导入 
-------------------------

下文以 ODC V3.3.0 版本为例，进行数据库内容的单表导入操作。更多的版本使用，请参考 [OceanBase 开发者中心](https://www.oceanbase.com/docs/oceanbase-developer-center/odc/V3.3.0/product-updates)。

1. 进入数据库连接后，左导航栏中单击 **表** 标签查看表列表，在表列表中右键目标表名，在弹出的列表中您可以选择使用 **单表导入** 功能以导入数据和结构。![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6360069161/p269206.png)

   

2. 单表导入的操作页面如下所示，导入参数配置说明如下：![](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4365784361/p269209.png)

   

   |       参数       |                                                                                                                                                                                                                                                                                         描述                                                                                                                                                                                                                                                                                          |
   |----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **任务名**        | 进入导入设置面板后，ODC 会在 **任务名** 文本框中自动生成默认任务名（连接名_模式名_日期），您也可以在文本框中修改自动生成的任务名。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   | **导入格式**       | ODC 目前支持批量导入 **SQL 文件** 和 **ZIP 压缩文件** 。您需要在 **导入格式** 标签下的下拉框中选择需要的文件格式。具体格式信息，请参见 [导数文件格式](../3.exporting-and-importing-data-using-odc/2.derivative-file-format.md)。                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   | **导入文件**       | 单击文件池进入文件资源管理器选择要导入的文件，或者直接将文件拖入文件池中以完成文件上传。上传的文件格式需要与您选择的导入文件格式相同，ZIP 压缩文件支持上传 .zip 结尾的文件。SQL 文件支持上传 .sql 文件。                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | **文件编码**       | ODC 目前支持 **ASCII** 、 **ISO-8859-1** 、 **GB2312** 、 **GBK** 、 **GB18030** 、 **Unicode（UTF-8）** 、 **Unicode（UTF-16）** 、 **Unicode（UTF-32）** 和 **BIG5** 等编码格式。您需要在 **文件编码** 下拉框中选择需要的编码格式。                                                                                                                                                                                                                                                                                                                                                                                             |
   | **导入内容**       | 当 **导入格式** 为 ZIP 压缩文件时需指定该项。ODC 目前支持 **仅导入数据** 、 **仅导入结构** 和 **导入数据和结构** 三种方式 **。** 其中导入结构指是否要导入对象的定义语句。您需要在 **导入内容** 标签下的选择框中选择需要导入的内容。                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **数据格式**       | 当 **导入格式** 为 ZIP 压缩文件时需指定该项。ODC 目前支持导入 **CSV 格式** 和 **SQL 格式** 的数据。具体格式信息，请参考 [导数文件格式](../3.exporting-and-importing-data-using-odc/2.derivative-file-format.md)。当导入内容为仅导入结构或导入文件为 SQL 文件时，无需选择数据格式。                                                                                                                                                                                                                                                                                                                                                                                                             |
   | **导入数据设置**     | 当 **导入格式** 为 ZIP 压缩文件且 **导入内容** 不为仅导入结构时需进行导入数据设置。该项包含以下设置项： * **导入前清空数据** ：勾选该项后，导入数据时将首先清空目标对象中原有的数据。   * **批量提交数量** ：单击 **导入数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定该项。通过指定批量提交数量，可在导入文件中导入指定数量数据时添加一句 `COMMIT` 命令。   * **跳过的数据类型** ：单击 **导入数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定该项。您可以通过该项指定导入数据时要跳过的数据类型。MySQL 和 Oracle 下可跳过的类型不同，支持多选。                                                                                                                 |
   | **CSV 格式信息**   | 当 **导入文件格式** 为 CSV 文件时，单击 **导入数据设置** 标签后的 **高级** 按钮，在弹出的列表中可指定以下信息： * **包含列头** ：该项默认勾选，选择导入数据为 CSV 格式时是否包含列头。   * **空字符串转为空值** ：该项默认勾选，选择导入数据为 CSV 格式时是否将表中的空字符串转换为空值 \\N。   * **字段分隔符** ：设置字段间的分隔符。支持选择逗号（,）、分号（;）和冒号（:）作为字段分割符。同时支持自定义一个字符长度的字符作为分隔符。   * **文本识别符** ：设置文本内容的识别符。支持选择单引号（'）和双引号（"）作为文本识别符。   * **换行符号** ：设置换行符。支持选择 **\\n** 、 **\\r** 和 **\\r\\n** 作为换行符。    |
   | **任务错误处理**     | ODC 提供 **停止任务** 和 **忽略错误继续任务** 两种错误处理方式。您需要在 **任务错误处理** 标签下选择需要的处理方式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **sys 租户账号配置** | 在该项下选择是否 **使用 sys 租户账号提升导入速度** 。勾选后在弹出的 **账户** 和 **密码** 文本框中填写 sys 租户下的用户名和对应的密码。设置完成后会使用 sys 租户的权限进行导入，可提升导入的速度。 **注意**  * **sys 租户账号和密码** 为集群租户下用户的账号和密码 (账号请勿填入"@sys#集群")。   * 如未配置 sys 租户账号，会导致导入导出缺注释和索引。                                                                                                                                                                                                                                                   |

   

3. 生成导入任务。

   指定好所有信息后，单击面板右下角的 **导入** 按钮以生成导入任务。
   

4. 查看导入任务。

   任务生成后会自动弹出 **任务中心** 面板，在任务中心您可以查看任务信息。
   




V2.2.30-BP14 
=================================
#docslug#/oceanbase-database/oceanbase-database/V4.0.0/v2-2-30-bp14


版本信息 
-------------------------



|  类目  |       描述       |
|------|----------------|
| 版本号  | V2.2.30-BP14   |
| 前置版本 | V2.2.20        |
| 发布时间 | 2020 年 9 月 9 日 |





适用版本 
-------------------------

支持从 V2.2.1-20200731153445 版本和 V2.2.20 版本直接升级到本版本。
**注意**



* 从 V2.2.1 版本升级到 V2.2.30 版本必须使用 V2.2.30-BP10 及以上版本。

  

* 如果从低版本升级到 V2.2.1 再升级到 V2.2.30，请确保升级到的 V2.2.1 版本是 V2.2.1-1865649 及之后的版本，并且升级到 V2.2.1 后合并或者转储一轮之后才能继续升级到 V2.2.30。

  




修复的问题 
--------------------------

* 修复了 observer core dump 的问题。

  

* 修复了 OceanBase 数据库 MySQL 模式下使用 perl 驱动时，insert on duplicate 返回的 affected rows 与 MySQL 不一致的问题。

  

* 分布式执行计划下，会执行 DML 的 RPC 聚合，提升效率减少网络压力。修复了该场景下如果内存不足可能导致执行报错但是错误码被覆盖进而继续执行，最终导致内存写坏进而 core dump 的问题。

  




已知问题 
-------------------------

* Oracle 模式下，不建议使用 nvarchar2 类型，使用该类型可能导致查询的 SQL 线程无响应。

  

* Oracle 模式下，禁止设置 sql_mode 为 PAD_CHAR_TO_FULL_LENGTH，否则可能导致查询正确性问题。

  

* Oracle 模式下禁止查询系统视图带有别名，否则会导致报错。

  




版本使用限制 
---------------------------

* 禁止将 clog 和数据放入同一个磁盘，尤其是机械磁盘。此情况下 CLOG 写盘有延迟可能导致 observer crash 问题。此外，clog 盘 IO 满可能导致系统核心表无 leader。

  

* 禁止在 OceanBase 数据库运行过程中将操作系统时间向过去回调。

  



